{"version":3,"sources":["./src/app/modules/main/pages/auth/auth-routing.module.ts","./src/app/modules/main/guards/profile.guard.ts","./src/app/modules/main/pages/auth/auth.module.ts"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAuD;AACG;;;AAE1D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,OAAO;QACb,YAAY,EAAE,GAAG,EAAE,CACjB,+JAAgC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC;KAC9D;IACD;QACE,IAAI,EAAE,UAAU;QAChB,YAAY,EAAE,GAAG,EAAE,CACjB,2KAAoC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;KACrE;IACD;QACE,IAAI,EAAE,SAAS;QACf,WAAW,EAAE,CAAC,kEAAY,CAAC;QAC3B,OAAO,EAAE,CAAC,kEAAY,CAAC;QACvB,YAAY,EAAE,GAAG,EAAE,CACjB,kPAA4C,CAAC,IAAI,CAC/C,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAC3B;KACJ;IACD;QACE,IAAI,EAAE,uBAAuB;QAC7B,YAAY,EAAE,GAAG,EAAE,CACjB,yPAA8D,CAAC,IAAI,CACjE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,0BAA0B,CACpC;KACJ;IACD;QACE,IAAI,EAAE,6BAA6B;QACnC,YAAY,EAAE,GAAG,EAAE,CACjB,+SAEC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,iCAAiC,CAAC;KACrD;IACD;QACE,IAAI,EAAE,IAAI;QACV,UAAU,EAAE,OAAO;KACpB;CACF,CAAC;AAMK,MAAM,iBAAiB;;kFAAjB,iBAAiB;gGAAjB,iBAAiB;oGAHnB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,iBAAiB,uFAFlB,4DAAY;;;;;;;;;;;;;;;;;;;;;AC7BjB,MAAM,YAAY;IAEvB,YAAoB,MAAc,EAAU,SAA2B;QAAnD,WAAM,GAAN,MAAM,CAAQ;QAAU,cAAS,GAAT,SAAS,CAAkB;QACrE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAC3C,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,CACrD,CAAC;IACJ,CAAC;IAED,WAAW,CACT,KAA6B,EAC7B,KAA0B;QAE1B,IAAI,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;YACrD,OAAO,IAAI,CAAC;SACb;QACD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;QACvC,OAAO,KAAK,CAAC;IACf,CAAC;IACD,OAAO,CAAC,KAAY,EAAE,QAAsB;QAC1C,IAAI,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;YACrD,OAAO,IAAI,CAAC;SACb;QACD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;QACvC,OAAO,KAAK,CAAC;IACf,CAAC;;wEAxBU,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFX,MAAM;;;;;;;;;;;;;ACbpB;AAAA;AAAA;AAAA;AAA0D;;AAMnD,MAAM,UAAU;;oEAAV,UAAU;yFAAV,UAAU;6FAFZ,CAAC,sEAAiB,CAAC;mIAEjB,UAAU,cAFX,sEAAiB","file":"pages-auth-auth-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ProfileGuard } from '../../guards/profile.guard';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'login',\r\n    loadChildren: () =>\r\n      import('./log-in/log-in.module').then((m) => m.LogInModule),\r\n  },\r\n  {\r\n    path: 'register',\r\n    loadChildren: () =>\r\n      import('./register/register.module').then((m) => m.RegisterModule),\r\n  },\r\n  {\r\n    path: 'profile',\r\n    canActivate: [ProfileGuard],\r\n    canLoad: [ProfileGuard],\r\n    loadChildren: () =>\r\n      import('./user-profile/user-profile.module').then(\r\n        (m) => m.UserProfileModule\r\n      ),\r\n  },\r\n  {\r\n    path: 'recuperar-contrasenia',\r\n    loadChildren: () =>\r\n      import('./recuperar-contrasenia/recuperar-contrasenia.module').then(\r\n        (m) => m.RecuperarContraseniaModule\r\n      ),\r\n  },\r\n  {\r\n    path: 'recuperar-contrasenia-step2',\r\n    loadChildren: () =>\r\n      import(\r\n        './recuperar-contrasenia-paso-dos/recuperar-contrasenia-paso-dos.module'\r\n      ).then((m) => m.RecuperarContraseniaPasoDosModule),\r\n  },\r\n  {\r\n    path: '**',\r\n    redirectTo: 'login',\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AuthRoutingModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  CanActivate,\r\n  CanLoad,\r\n  Route,\r\n  Router,\r\n  RouterStateSnapshot,\r\n  UrlSegment,\r\n} from '@angular/router';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { UserStoreService } from '../../../services/user-store.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ProfileGuard implements CanActivate, CanLoad {\r\n  private user: User | undefined;\r\n  constructor(private router: Router, private userStore: UserStoreService) {\r\n    this.userStore.loggedUser$.subscribe((res) =>\r\n      res.id ? (this.user = res) : (this.user = undefined)\r\n    );\r\n  }\r\n\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): boolean {\r\n    if (localStorage.getItem('access-token') && this.user) {\r\n      return true;\r\n    }\r\n    this.router.navigate(['main', 'home']);\r\n    return false;\r\n  }\r\n  canLoad(route: Route, segments: UrlSegment[]): boolean {\r\n    if (localStorage.getItem('access-token') && this.user) {\r\n      return true;\r\n    }\r\n    this.router.navigate(['main', 'home']);\r\n    return false;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { AuthRoutingModule } from './auth-routing.module';\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [AuthRoutingModule],\r\n})\r\nexport class AuthModule {}\r\n"],"sourceRoot":"webpack:///"}
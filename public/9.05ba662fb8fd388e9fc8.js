(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"IQz/":function(e,t,i){"use strict";i.r(t),i.d(t,"InteresesModule",function(){return S});var r=i("ofXK"),n=i("tyNb"),s=i("XNiG"),a=i("1G5W"),o=i("AytR"),c=i("3Pt+"),b=i("PSD3"),l=i.n(b),d=i("ZLyn"),m=i("fXoL"),u=i("N+K7"),h=i("T9Ob"),g=i("FQRV");function p(e,t){if(1&e){const e=m.Qb();m.Pb(0,"app-table",6),m.Wb("onRecargar",function(t){return m.gc(e),m.Yb(2).recargarIntereses(t)})("onCreate",function(){return m.gc(e),m.Yb(2).crearInteres()})("onEdit",function(t){return m.gc(e),m.Yb(2).editarInteres(t)})("onDelete",function(t){return m.gc(e),m.Yb(2).borrarInteres(t)}),m.Ob()}if(2&e){const e=m.Yb(2);m.dc("title","Intereses")("filasTabla",e.tableData)("encabezadosTabla",e.encabezadosTabla)("totalSection",null==e.tableData?null:e.tableData.length)}}function f(e,t){if(1&e&&(m.Pb(0,"div",2),m.Pb(1,"div",3),m.Pb(2,"div",4),m.kc(3,p,1,4,"app-table",5),m.Ob(),m.Ob(),m.Ob()),2&e){const e=m.Yb();m.zb(3),m.dc("ngIf",e.tableData)}}function I(e,t){if(1&e&&(m.Pb(0,"span",24),m.mc(1),m.Ob()),2&e){const e=m.Yb(2);m.zb(1),m.nc(e.interestCreationImageValidator)}}function v(e,t){1&e&&(m.Pb(0,"span",24),m.mc(1,"Los formatos aceptados son JPG, JPEG y PNG"),m.Ob())}function O(e,t){1&e&&(m.Pb(0,"span",24),m.mc(1,"Este campo es requerido"),m.Ob())}function P(e,t){1&e&&(m.Pb(0,"span",24),m.mc(1,"Debe tener al menos 6 caracteres"),m.Ob())}function C(e,t){1&e&&(m.Pb(0,"span",24),m.mc(1,"Este campo es requerido"),m.Ob())}function D(e,t){1&e&&(m.Pb(0,"span",24),m.mc(1,"Debe tener al menos 10 caracteres"),m.Ob())}function y(e,t){if(1&e){const e=m.Qb();m.Pb(0,"div",2),m.Pb(1,"div",3),m.Pb(2,"div",7),m.Pb(3,"h1",8),m.mc(4),m.Ob(),m.Ob(),m.Pb(5,"div",4),m.Pb(6,"form",9),m.Wb("ngSubmit",function(){return m.gc(e),m.Yb().formSubmit()}),m.Pb(7,"div",4),m.Pb(8,"div",10),m.Pb(9,"div",11),m.Wb("click",function(){return m.gc(e),m.fc(12).click()}),m.Lb(10,"img",12),m.Pb(11,"input",13,14),m.Wb("change",function(t){return m.gc(e),m.Yb().showSelectedImage(t)}),m.Ob(),m.Pb(13,"div",15),m.kc(14,I,2,1,"span",16),m.kc(15,v,2,0,"span",16),m.Ob(),m.Ob(),m.Ob(),m.Pb(16,"div",0),m.Pb(17,"div",2),m.Pb(18,"div",17),m.Pb(19,"div",18),m.Lb(20,"input",19),m.Pb(21,"div",15),m.kc(22,O,2,0,"span",16),m.kc(23,P,2,0,"span",16),m.Ob(),m.Ob(),m.Ob(),m.Pb(24,"div",17),m.Pb(25,"div",18),m.Lb(26,"textarea",20),m.Pb(27,"div",15),m.kc(28,C,2,0,"span",16),m.kc(29,D,2,0,"span",16),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Pb(30,"div",21),m.Pb(31,"button",22),m.mc(32," Confirmar "),m.Ob(),m.Pb(33,"button",23),m.Wb("click",function(){return m.gc(e),m.Yb().recargarIntereses(!0)}),m.mc(34," Volver "),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob()}if(2&e){const e=m.Yb();m.zb(4),m.oc("",e.crudAction," Interes/es"),m.zb(2),m.dc("formGroup",e.interestForm),m.zb(4),m.dc("src",e.imageToShow,m.hc),m.zb(1),m.dc("hidden",!0),m.zb(3),m.dc("ngIf",e.interestCreationImageValidator),m.zb(1),m.dc("ngIf",!e.acceptedFileTypes),m.zb(7),m.dc("ngIf",(null==e.interestForm.controls.title.errors?null:e.interestForm.controls.title.errors.required)&&e.interestForm.controls.title.touched),m.zb(1),m.dc("ngIf",(null==e.interestForm.controls.title.errors?null:e.interestForm.controls.title.errors.minlength)&&e.interestForm.controls.title.touched),m.zb(5),m.dc("ngIf",(null==e.interestForm.controls.description.errors?null:e.interestForm.controls.description.errors.required)&&e.interestForm.controls.description.touched),m.zb(1),m.dc("ngIf",(null==e.interestForm.controls.description.errors?null:e.interestForm.controls.description.errors.minlength)&&e.interestForm.controls.description.touched)}}const F=[{path:"",component:(()=>{class e{constructor(e,t,i){this.httpService=e,this.fb=t,this.adminPanelCrudService=i,this.someClass=!0,this.encabezadosTabla=["T\xedtulo","Descripci\xf3n"],this.tableData=[],this.interestData=[],this.isCreating=!1,this.isEditing=!1,this.crudAction="",this.imageToShow="../../../../../assets/no-image.png",this.acceptedFileTypes=!0,this.interestCreationImageValidator="",this.destroy$=new s.a,this.createForm()}createForm(){this.interestForm=this.fb.group({title:["",[c.m.required,c.m.minLength(6)]],description:["",[c.m.required,c.m.minLength(10)]],image:[""]})}ngOnInit(){this.getIntereses()}formSubmit(){var e,t;if(this.interestForm.markAllAsTouched(),"Crear"!==this.crudAction||this.interestForm.controls.image.value){if(this.interestForm.valid){this.interestCreationImageValidator="";const i=new FormData;i.append("title",null===(e=this.interestForm.controls.title)||void 0===e?void 0:e.value),i.append("description",null===(t=this.interestForm.controls.description)||void 0===t?void 0:t.value),i.append("image",this.fileToUpload),"Crear"===this.crudAction?this.crearInteresEnLaDb(i):this.editarInteresEnLaDb(i)}}else this.interestCreationImageValidator="La im\xe1gen es obligatoria"}getIntereses(){this.httpService.getInterests().pipe(Object(a.a)(this.destroy$)).subscribe(e=>{var t;(null===(t=e.meta)||void 0===t?void 0:t.status.toString().includes("20"))?e.data.forEach(e=>this.setTableData(e)):Object(d.d)(e)},e=>Object(d.c)(e))}setTableData(e){this.tableData.push({imagen:`${o.a.API_IMAGE_URL}/${e.image}`,item2:e.title,item3:e.description,id:e.id}),this.interestData.push(e)}recargarIntereses(e){e&&(this.resetsetControls(),this.tableData=[],this.interestData=[],this.isCreating=!1,this.isEditing=!1,this.getIntereses())}resetsetControls(){this.interestForm.controls.title.setValue(""),this.interestForm.controls.description.setValue(""),this.interestForm.controls.image.setValue(""),this.imageToShow="../../../../../assets/no-image.png"}showSelectedImage(e){var t;if("Crear"===this.crudAction&&!this.interestForm.controls.image.value)return void(this.interestCreationImageValidator="La im\xe1gen es obligatoria");this.interestCreationImageValidator="";const i=null===(t=e.target)||void 0===t?void 0:t.files[0];if(this.acceptedFileTypes="image/jpg"===i.type||"image/jpeg"===i.type||"image/png"===i.type,i&&this.acceptedFileTypes){this.fileToUpload=i;const e=new FileReader;e.readAsDataURL(i),e.onload=()=>this.imageToShow=e.result}else this.imageToShow="../../../../../assets/no-image.png"}crearInteres(){this.crudAction="Crear",this.isCreating=!0,this.isEditing=!1}crearInteresEnLaDb(e){this.adminPanelCrudService.create(e,"interests").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.recargarIntereses(!0),Object(d.a)(e,"cre\xf3","inter\xe9s")},e=>{this.recargarIntereses(!0),Object(d.c)(e)})}editarInteres(e){this.crudAction="Editar",this.isEditing=!0,this.isCreating=!1;const t=this.interestData.find(t=>t.id===e);t&&(this.interestsID=e,this.interestForm.controls.title.setValue(t.title),this.interestForm.controls.description.setValue(t.description),this.imageToShow=`${o.a.API_IMAGE_URL}/${t.image}`)}editarInteresEnLaDb(e){this.adminPanelCrudService.edit(this.interestsID,e,"interests").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.recargarIntereses(!0),Object(d.a)(e,"edit\xf3","inter\xe9s")},e=>{this.recargarIntereses(!0),Object(d.c)(e)})}borrarInteres(e){l.a.fire({title:"\xbfSeguro quer\xe9s elimninar el inter\xe9s seleccionado?",showDenyButton:!0,confirmButtonText:"Si, borrar",denyButtonText:"No"}).then(t=>{t.isConfirmed&&this.borrarInteresesDeLaDb(e)})}borrarInteresesDeLaDb(e){this.adminPanelCrudService.delete(e,"interests").pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.recargarIntereses(!0),Object(d.a)(e,"borr\xf3","inter\xe9s")},e=>{this.recargarIntereses(!0),Object(d.c)(e)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(m.Kb(u.a),m.Kb(c.c),m.Kb(h.a))},e.\u0275cmp=m.Eb({type:e,selectors:[["app-intereses"]],hostVars:2,hostBindings:function(e,t){2&e&&m.Cb("admin-panel-container",t.someClass)},decls:3,vars:2,consts:[[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"card"],[1,"card-body"],[3,"title","filasTabla","encabezadosTabla","totalSection","onRecargar","onCreate","onEdit","onDelete",4,"ngIf"],[3,"title","filasTabla","encabezadosTabla","totalSection","onRecargar","onCreate","onEdit","onDelete"],[1,"card-header"],[1,"primary-dark"],[1,"form","p-t-20","form-material",3,"formGroup","ngSubmit"],[1,"row","justify-content-center"],[1,"col-md-4","mb-2",3,"click"],["alt","Trabajo realizado",1,"img-responsive",3,"src"],["type","file","formControlName","image",3,"hidden","change"],["imageInput",""],[1,"p-2"],["class","text-danger",4,"ngIf"],[1,"form-group"],[1,"input-group"],["type","text","id","exampleInputuname2","placeholder","T\xedtulo","formControlName","title",1,"form-control"],["type","text","id","exampleInputuname2","placeholder","Descripci\xf3n","formControlName","description","rows","5",1,"form-control"],[1,"card-footer"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10","bgc-primary-dark"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","m-r-10",3,"click"],[1,"text-danger"]],template:function(e,t){1&e&&(m.Pb(0,"div",0),m.kc(1,f,4,1,"div",1),m.kc(2,y,35,10,"div",1),m.Ob()),2&e&&(m.zb(1),m.dc("ngIf",!t.isEditing&&!t.isCreating),m.zb(1),m.dc("ngIf",t.isCreating||t.isEditing))},directives:[r.m,g.a,c.n,c.h,c.e,c.b,c.g,c.d],styles:[""]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ib({type:e}),e.\u0275inj=m.Hb({imports:[[n.f.forChild(F)],n.f]}),e})();var w=i("6eV/");let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ib({type:e}),e.\u0275inj=m.Hb({imports:[[r.c,T,w.a,c.k]]}),e})()}}]);
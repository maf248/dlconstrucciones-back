(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"9oUk":function(e,t,a){"use strict";a.r(t),a.d(t,"TipoDeTrabajoModule",function(){return E});var r=a("ofXK"),o=a("tyNb"),i=a("XNiG"),n=a("1G5W"),s=a("nYR2"),c=a("AytR"),b=a("PSD3"),l=a.n(b),d=a("3Pt+"),p=a("fXoL"),u=a("N+K7"),m=a("T9Ob"),g=a("FQRV");function h(e,t){if(1&e){const e=p.Qb();p.Pb(0,"app-table",6),p.Wb("onRecargar",function(t){return p.gc(e),p.Yb(2).recargarTrabajos(t)})("onCreate",function(){return p.gc(e),p.Yb(2).crearTipoDeTrabajo()})("onEdit",function(t){return p.gc(e),p.Yb(2).editarTipoDeTrabajo(t)})("onDelete",function(t){return p.gc(e),p.Yb(2).borrarTipoDeTrabajo(t)}),p.Ob()}if(2&e){const e=p.Yb(2);p.dc("title","Tipos de trabajo")("loading",e.loading)("filasTabla",e.tableData)("encabezadosTabla",e.encabezadosTabla)("totalSection",null==e.tableData?null:e.tableData.length)}}function f(e,t){if(1&e&&(p.Pb(0,"div",2),p.Pb(1,"div",3),p.Pb(2,"div",4),p.kc(3,h,1,5,"app-table",5),p.Ob(),p.Ob(),p.Ob()),2&e){const e=p.Yb();p.zb(3),p.dc("ngIf",e.tableData)}}function T(e,t){1&e&&(p.Pb(0,"span",23),p.mc(1,"Este dato es requerido"),p.Ob())}function v(e,t){1&e&&(p.Pb(0,"span",23),p.mc(1,"Los formatos aceptados son JPG, JPEG y PNG"),p.Ob())}function j(e,t){1&e&&(p.Pb(0,"span",23),p.mc(1,"Este campo es requerido"),p.Ob())}function D(e,t){1&e&&(p.Pb(0,"span",23),p.mc(1,"Debe tener al menos 6 caracteres"),p.Ob())}function O(e,t){if(1&e){const e=p.Qb();p.Pb(0,"div",2),p.Pb(1,"div",3),p.Pb(2,"div",7),p.Pb(3,"h1",8),p.mc(4),p.Ob(),p.Ob(),p.Pb(5,"div",4),p.Pb(6,"form",9),p.Wb("ngSubmit",function(){return p.gc(e),p.Yb().formSubmit()}),p.Pb(7,"div",4),p.Pb(8,"div",10),p.Pb(9,"div",11),p.Wb("click",function(){return p.gc(e),p.fc(12).click()}),p.Lb(10,"img",12),p.Pb(11,"input",13,14),p.Wb("change",function(t){return p.gc(e),p.Yb().showSelectedImage(t)}),p.Ob(),p.Pb(13,"div",15),p.kc(14,T,2,0,"span",16),p.kc(15,v,2,0,"span",16),p.Ob(),p.Ob(),p.Ob(),p.Pb(16,"div",0),p.Pb(17,"div",2),p.Pb(18,"div",17),p.Pb(19,"div",18),p.Lb(20,"input",19),p.Pb(21,"div",15),p.kc(22,j,2,0,"span",16),p.kc(23,D,2,0,"span",16),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Pb(24,"div",20),p.Pb(25,"button",21),p.mc(26," Confirmar "),p.Ob(),p.Pb(27,"button",22),p.Wb("click",function(){return p.gc(e),p.Yb().recargarTrabajos(!0)}),p.mc(28," Volver "),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob()}if(2&e){const e=p.Yb();p.zb(4),p.oc("",e.crudAction," servicio"),p.zb(2),p.dc("formGroup",e.tipoDeTrabajoForm),p.zb(4),p.dc("src",e.imageToShow,p.hc),p.zb(1),p.dc("hidden",!0),p.zb(3),p.dc("ngIf",(null==e.tipoDeTrabajoForm.controls.image.errors?null:e.tipoDeTrabajoForm.controls.image.errors.required)&&e.tipoDeTrabajoForm.controls.image.touched),p.zb(1),p.dc("ngIf",!e.acceptedFileTypes),p.zb(7),p.dc("ngIf",(null==e.tipoDeTrabajoForm.controls.title.errors?null:e.tipoDeTrabajoForm.controls.title.errors.required)&&e.tipoDeTrabajoForm.controls.title.touched),p.zb(1),p.dc("ngIf",(null==e.tipoDeTrabajoForm.controls.title.errors?null:e.tipoDeTrabajoForm.controls.title.errors.minlength)&&e.tipoDeTrabajoForm.controls.title.touched)}}const P=[{path:"",component:(()=>{class e{constructor(e,t,a){this.httpSrv=e,this.fb=t,this.adminPanelCrudService=a,this.someClass=!0,this.encabezadosTabla=["T\xedtulo"],this.tableData=[],this.loading=!0,this.tiposDeTrabajo=[],this.isEditing=!1,this.isCreating=!1,this.crudAction="",this.imageToShow="../../../../../assets/no-image.png",this.acceptedFileTypes=!0,this.destroy$=new i.a,this.createForm()}createForm(){this.tipoDeTrabajoForm=this.fb.group({image:[""],title:["",[d.m.required,d.m.minLength(6)]]})}ngOnInit(){this.getTiposDeTrabajo()}getTiposDeTrabajo(){this.httpSrv.getTypesOfJob().pipe(Object(n.a)(this.destroy$),Object(s.a)(()=>this.loading=!1)).subscribe(e=>{e.data.forEach(e=>{this.tableData.push({imagen:`${c.a.API_IMAGE_URL}/${e.image}`,item2:e.title,id:e.id}),this.tiposDeTrabajo.push(e)})},()=>{l.a.fire("Error","Tuvimos un error desconocido, por favor intenta recargar la p\xe1gina o espera un rato.","error")})}formSubmit(){var e;if(this.tipoDeTrabajoForm.markAllAsTouched(),this.tipoDeTrabajoForm.valid){const t=new FormData;t.append("title",null===(e=this.tipoDeTrabajoForm.controls.title)||void 0===e?void 0:e.value),t.append("image",this.fileToUpload),"Crear"===this.crudAction?this.crearTipoDeTrabajoEnLaDb(t):this.editarTipoDeTrabajoEnLaDb(t)}}recargarTrabajos(e){e&&(this.resetsetControls(),this.tableData=[],this.tiposDeTrabajo=[],this.isCreating=!1,this.isEditing=!1,this.getTiposDeTrabajo())}resetsetControls(){var e,t,a,r;null===(t=null===(e=this.tipoDeTrabajoForm.controls)||void 0===e?void 0:e.title)||void 0===t||t.setValue(""),null===(r=null===(a=this.tipoDeTrabajoForm.controls)||void 0===a?void 0:a.image)||void 0===r||r.setValue(""),this.imageToShow="../../../../../assets/no-image.png"}showSelectedImage(e){var t;const a=null===(t=e.target)||void 0===t?void 0:t.files[0];if(this.acceptedFileTypes="image/jpg"===a.type||"image/jpeg"===a.type||"image/png"===a.type,a&&this.acceptedFileTypes){this.fileToUpload=a;const e=new FileReader;e.readAsDataURL(a),e.onload=()=>this.imageToShow=e.result}else this.imageToShow="../../../../../assets/no-image.png"}crearTipoDeTrabajo(){this.isEditing=!1,this.isCreating=!0,this.crudAction="Crear"}crearTipoDeTrabajoEnLaDb(e){this.adminPanelCrudService.create(e,"types").pipe(Object(n.a)(this.destroy$)).subscribe(e=>{var t;this.recargarTrabajos(!0),this.alertFailureOrSuccess(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.status)},()=>l.a.fire("Error","No pudimos crear el tipo de trabajo, por favor intent\xe1 de nuevo recargando la p\xe1gina","error"))}editarTipoDeTrabajo(e){this.isEditing=!0,this.isCreating=!1,this.crudAction="Editar";const t=this.tiposDeTrabajo.find(t=>t.id===e);t&&(this.tipoDeTrabajoID=e,this.tipoDeTrabajoForm.controls.title.setValue(t.title),this.imageToShow=`${c.a.API_IMAGE_URL}/${t.image}`)}editarTipoDeTrabajoEnLaDb(e){this.adminPanelCrudService.edit(this.tipoDeTrabajoID,e,"types").pipe(Object(n.a)(this.destroy$)).subscribe(e=>{var t;this.recargarTrabajos(!0),this.alertFailureOrSuccess(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.status)},()=>{this.recargarTrabajos(!0),l.a.fire("Error","Tuvimos un error desconocido, por favor intenta recargar la p\xe1gina o espera un rato.","error")})}borrarTipoDeTrabajo(e){l.a.fire({title:"\xbfSeguro quer\xe9s elimninar el trabajo seleccionado?",showDenyButton:!0,confirmButtonText:"Si, borrar",denyButtonText:"No"}).then(t=>{t.isConfirmed&&this.borrarTipoDeTrabajoEnLaDb(e)})}borrarTipoDeTrabajoEnLaDb(e){this.adminPanelCrudService.delete(e,"types").pipe(Object(n.a)(this.destroy$)).subscribe(e=>{var t;this.recargarTrabajos(!0),this.alertFailureOrSuccess(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.status)},()=>{l.a.fire("\xa1Lo sentimos!","No pudimos realizar el pedido correctamente, por favor actualiz\xe1 la p\xe1gina e intent\xe1 de nuevo","error")})}alertFailureOrSuccess(e){200===e||201===e?l.a.fire("\xa1Excelente!","El tipo de trabajo se cre\xf3 correctamente","success"):l.a.fire("Error","No pudimos crear el tipo de trabajo, por favor intent\xe1 de nuevo recargando la p\xe1gina","error")}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(p.Kb(u.a),p.Kb(d.c),p.Kb(m.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-tipo-de-trabajo"]],hostVars:2,hostBindings:function(e,t){2&e&&p.Cb("admin-panel-container",t.someClass)},decls:3,vars:2,consts:[[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"card"],[1,"card-body"],[3,"title","loading","filasTabla","encabezadosTabla","totalSection","onRecargar","onCreate","onEdit","onDelete",4,"ngIf"],[3,"title","loading","filasTabla","encabezadosTabla","totalSection","onRecargar","onCreate","onEdit","onDelete"],[1,"card-header"],[1,"primary-dark"],[1,"form","p-t-20","form-material",3,"formGroup","ngSubmit"],[1,"row","justify-content-center"],[1,"col-md-4","mb-2",3,"click"],["alt","Trabajo realizado",1,"img-responsive",3,"src"],["type","file","formControlName","image",3,"hidden","change"],["imageInput",""],[1,"p-2"],["class","text-danger",4,"ngIf"],[1,"form-group"],[1,"input-group"],["type","text","id","exampleInputuname2","placeholder","T\xedtulo","formControlName","title",1,"form-control"],[1,"card-footer"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10","bgc-primary-dark"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","m-r-10",3,"click"],[1,"text-danger"]],template:function(e,t){1&e&&(p.Pb(0,"div",0),p.kc(1,f,4,1,"div",1),p.kc(2,O,29,8,"div",1),p.Ob()),2&e&&(p.zb(1),p.dc("ngIf",!t.isEditing&&!t.isCreating),p.zb(1),p.dc("ngIf",t.isCreating||t.isEditing))},directives:[r.l,g.a,d.n,d.h,d.e,d.b,d.g,d.d],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({imports:[[o.f.forChild(P)],o.f]}),e})();var F=a("6eV/");let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({imports:[[r.b,y,F.a,d.k]]}),e})()}}]);
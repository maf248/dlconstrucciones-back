(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"6eV/":function(t,e,i){"use strict";i.d(e,"a",function(){return c});var o=i("ofXK"),n=i("3Pt+"),r=i("tyNb"),a=i("fXoL");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({imports:[[o.b,n.f,n.k,r.f]]}),t})()},FQRV:function(t,e,i){"use strict";i.d(e,"a",function(){return z});var o=i("fXoL"),n=i("PSD3"),r=i.n(n),a=i("ofXK"),c=i("tyNb");function s(t,e){1&t&&(o.Pb(0,"div",9),o.Pb(1,"div",2),o.Pb(2,"div",3),o.Pb(3,"div",4),o.Pb(4,"div",10),o.Pb(5,"h4",11),o.mc(6,"Cargado"),o.Ob(),o.Lb(7,"i",12),o.Pb(8,"p",13),o.mc(9,"Aguarda un momento por favor"),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob())}function l(t,e){if(1&t&&(o.Nb(0),o.Pb(1,"h6",28),o.mc(2),o.Zb(3,"lowercase"),o.Ob(),o.Mb()),2&t){const t=o.Yb(2);o.zb(2),o.pc(" ",t.totalSection," ",o.ac(3,2,t.title)," en mi p\xe1gina. ")}}function d(t,e){if(1&t&&(o.Pb(0,"h6",28),o.mc(1),o.Zb(2,"lowercase"),o.Ob()),2&t){const t=o.Yb(2);o.zb(1),o.qc(" ",t.searchingResults," ",o.ac(2,3,t.title)," encontrados de ",t.totalSection," totales. ")}}function b(t,e){1&t&&(o.Pb(0,"th",26),o.mc(1," Im\xe1gen / Avatar "),o.Ob())}function m(t,e){if(1&t&&(o.Pb(0,"th",29),o.mc(1),o.Ob()),2&t){const t=e.$implicit;o.zb(1),o.oc(" ",t," ")}}function u(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",38),o.Pb(1,"img",39),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).expandirImagen(e.imagen)}),o.Ob(),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.zb(1),o.dc("src",t.imagen,o.hc)}}function p(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item2)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item2.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item2,0,100),"",(null==t.item2?null:t.item2.length)>100?"...":""," ")}}function f(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item3)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item3.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item3,0,100),"",(null==t.item3?null:t.item3.length)>100?"...":""," ")}}function g(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item4)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item4.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item4,0,100),"",(null==t.item4?null:t.item4.length)>100?"...":""," ")}}function h(t,e){if(1&t&&(o.Pb(0,"td",41),o.mc(1),o.Ob()),2&t){const t=o.Yb().$implicit;o.Cb("pointer",+t.linkVerMas.value>100),o.dc("routerLink",t.linkVerMas.route),o.zb(1),o.oc(" ",t.linkVerMas.value," ")}}function v(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item6)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item6.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item6,0,100),"",(null==t.item6?null:t.item6.length)>100?"...":""," ")}}function P(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item7)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item7.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item7,0,100),"",(null==t.item7?null:t.item7.length)>100?"...":""," ")}}function O(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item8)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item8.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item8,0,100),"",(null==t.item8?null:t.item8.length)>100?"...":""," ")}}function L(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item9)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item9.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item9,0,100),"",(null==t.item9?null:t.item9.length)>100?"...":""," ")}}function k(t,e){if(1&t){const t=o.Qb();o.Pb(0,"td",40),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).verMas(e.item10)}),o.mc(1),o.Zb(2,"slice"),o.Ob()}if(2&t){const t=o.Yb().$implicit;o.Cb("pointer",t.item10.length>100),o.zb(1),o.pc(" ",o.cc(2,4,t.item10,0,100),"",(null==t.item10?null:t.item10.length)>100?"...":""," ")}}function y(t,e){if(1&t){const t=o.Qb();o.Pb(0,"a",34),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).addPayment(e.id)}),o.Lb(1,"i",42),o.Ob()}}function C(t,e){if(1&t){const t=o.Qb();o.Pb(0,"a",34),o.Wb("click",function(){o.gc(t);const e=o.Yb().$implicit;return o.Yb(2).addAsset(e.id)}),o.Lb(1,"i",43),o.Ob()}}function w(t,e){if(1&t){const t=o.Qb();o.Pb(0,"tr"),o.kc(1,u,2,1,"td",30),o.kc(2,p,3,8,"td",31),o.kc(3,f,3,8,"td",31),o.kc(4,g,3,8,"td",31),o.kc(5,h,2,4,"td",32),o.kc(6,v,3,8,"td",31),o.kc(7,P,3,8,"td",31),o.kc(8,O,3,8,"td",31),o.kc(9,L,3,8,"td",31),o.kc(10,k,3,8,"td",31),o.Pb(11,"td",33),o.Pb(12,"a",34),o.Wb("click",function(){o.gc(t);const i=e.$implicit;return o.Yb(2).edit(i.id)}),o.Lb(13,"i",35),o.Ob(),o.Pb(14,"a",34),o.Wb("click",function(){o.gc(t);const i=e.$implicit;return o.Yb(2).delete(i.id)}),o.Lb(15,"i",36),o.Ob(),o.kc(16,y,2,0,"a",37),o.kc(17,C,2,0,"a",37),o.Ob(),o.Ob()}if(2&t){const t=e.$implicit,i=o.Yb(2);o.zb(1),o.dc("ngIf",!i.noImage),o.zb(1),o.dc("ngIf",t.item2),o.zb(1),o.dc("ngIf",t.item3),o.zb(1),o.dc("ngIf",t.item4),o.zb(1),o.dc("ngIf",t.linkVerMas),o.zb(1),o.dc("ngIf",t.item6),o.zb(1),o.dc("ngIf",t.item7),o.zb(1),o.dc("ngIf",t.item8),o.zb(1),o.dc("ngIf",t.item9),o.zb(1),o.dc("ngIf",t.item10),o.zb(6),o.dc("ngIf",i.addPayments),o.zb(1),o.dc("ngIf",i.addAssets)}}function I(t,e){if(1&t){const t=o.Qb();o.Pb(0,"div",14),o.Pb(1,"div",2),o.Pb(2,"div",3),o.Pb(3,"div",4),o.Pb(4,"div",15),o.Pb(5,"div",16),o.Pb(6,"h4",17),o.mc(7),o.Ob(),o.kc(8,l,4,4,"ng-container",18),o.kc(9,d,3,5,"ng-template",null,19,o.lc),o.Ob(),o.Pb(11,"div",20),o.Pb(12,"button",21),o.Wb("click",function(){return o.gc(t),o.Yb().create()}),o.mc(13),o.Ob(),o.Ob(),o.Ob(),o.Pb(14,"div",22),o.Pb(15,"table",23),o.Pb(16,"thead"),o.Pb(17,"tr"),o.kc(18,b,2,0,"th",24),o.kc(19,m,2,1,"th",25),o.Pb(20,"th",26),o.mc(21,"Acciones"),o.Ob(),o.Ob(),o.Ob(),o.Pb(22,"tbody"),o.kc(23,w,18,12,"tr",27),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob()}if(2&t){const t=o.fc(10),e=o.Yb();o.zb(7),o.nc(e.title),o.zb(1),o.dc("ngIf",!e.searching)("ngIfElse",t),o.zb(5),o.oc(" Crear ",e.title," "),o.zb(5),o.dc("ngIf",!e.noImage),o.zb(1),o.dc("ngForOf",e.encabezadosTabla),o.zb(4),o.dc("ngForOf",e.filasTabla)}}let z=(()=>{class t{constructor(){this.onCreate=new o.n,this.onEdit=new o.n,this.onDelete=new o.n,this.onRecargar=new o.n,this.onAddPayments=new o.n,this.onAddAssets=new o.n,this.title="",this.totalSection=0,this.encabezadosTabla=[],this.filasTabla=[],this.loading=!0,this.noImage=!1,this.addAssets=!1,this.addPayments=!1,this.searching=!1,this.searchingResults=0}expandirImagen(t){r.a.fire({imageUrl:t,imageWidth:400,imageHeight:400,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}verMas(t){t.length>100&&r.a.fire({text:t,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}create(){this.onCreate.emit()}edit(t){this.onEdit.emit(t)}delete(t){this.onDelete.emit(t)}addPayment(t){this.onAddPayments.emit(t)}addAsset(t){this.onAddAssets.emit(t)}search(t){if(this.searching=!0,!t)return this.onRecargar.emit(!0),void(this.searching=!1);this.filasTabla=this.filasTabla.filter(e=>{var i,o,n,r,a,c,s,l;return(null===(i=e.item2)||void 0===i?void 0:i.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(o=e.item3)||void 0===o?void 0:o.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(n=e.item4)||void 0===n?void 0:n.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(r=e.item6)||void 0===r?void 0:r.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(a=e.item7)||void 0===a?void 0:a.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(c=e.item8)||void 0===c?void 0:c.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(s=e.item9)||void 0===s?void 0:s.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))||(null===(l=e.item10)||void 0===l?void 0:l.toLocaleLowerCase().trim().includes(t.toLocaleLowerCase().trim()))}),this.searchingResults=this.filasTabla.length}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-table"]],inputs:{title:"title",totalSection:"totalSection",encabezadosTabla:"encabezadosTabla",filasTabla:"filasTabla",loading:"loading",noImage:"noImage",addAssets:"addAssets",addPayments:"addPayments"},outputs:{onCreate:"onCreate",onEdit:"onEdit",onDelete:"onDelete",onRecargar:"onRecargar",onAddPayments:"onAddPayments",onAddAssets:"onAddAssets"},decls:9,vars:2,consts:[[1,"table-main-container"],[1,"row","animated","fadeIn","search-container"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar en la tabla",1,"form-control","primary-dark",3,"keyup"],["searchInput",""],["class","row animated fadeIn loading-container",4,"ngIf"],["class","row animated fadeIn rows-container",4,"ngIf"],[1,"row","animated","fadeIn","loading-container"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2"],[1,"mb-0"],[1,"row","animated","fadeIn","rows-container"],[1,"title-section"],[1,"title-section-info"],[1,"card-title","primary-dark"],[4,"ngIf","ngIfElse"],["searchingTemplate",""],[1,"title-section-actions"],[1,"btn","bgc-primary-dark","text-white",3,"click"],[1,"table-responsive"],[1,"table","table-bordered"],["class","text-nowrap primary-dark w100",4,"ngIf"],["class","primary-dark",4,"ngFor","ngForOf"],[1,"text-nowrap","primary-dark","w100"],[4,"ngFor","ngForOf"],[1,"card-subtitle","primary-dark"],[1,"primary-dark"],["class","text-center",4,"ngIf"],["class","primary-dark",3,"pointer","click",4,"ngIf"],["class","primary-dark",3,"pointer","routerLink",4,"ngIf"],[1,"text-nowrap","text-center","actions"],[1,"pointer",3,"click"],[1,"fa","fa-pencil","text-danger","primary-dark"],[1,"fa","fa-close","text-danger","primary-dark"],["class","pointer",3,"click",4,"ngIf"],[1,"text-center"],["alt","Avatar",1,"avatar","pointer",3,"src","click"],[1,"primary-dark",3,"click"],[1,"primary-dark",3,"routerLink"],[1,"ti","ti-money","text-danger","primary-dark"],[1,"ti","ti-image","text-danger","primary-dark"]],template:function(t,e){if(1&t){const t=o.Qb();o.Pb(0,"div",0),o.Pb(1,"div",1),o.Pb(2,"div",2),o.Pb(3,"div",3),o.Pb(4,"div",4),o.Pb(5,"input",5,6),o.Wb("keyup",function(){o.gc(t);const i=o.fc(6);return e.search(i.value)}),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.kc(7,s,10,0,"div",7),o.kc(8,I,24,7,"div",8),o.Ob()}2&t&&(o.zb(7),o.dc("ngIf",e.loading),o.zb(1),o.dc("ngIf",!e.loading))},directives:[a.l,a.k,c.d],pipes:[a.j,a.o],styles:[".table-main-container[_ngcontent-%COMP%]   .rows-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.table-main-container[_ngcontent-%COMP%]   .w100[_ngcontent-%COMP%]{width:100px}.table-main-container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:50px;height:50px}.table-main-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),t})()},T9Ob:function(t,e,i){"use strict";i.d(e,"a",function(){return c});var o=i("tk/3"),n=i("AytR"),r=i("7hDB"),a=i("fXoL");let c=(()=>{class t{constructor(t){this.http=t,this.headers=new o.c({"access-token":Object(r.a)()})}create(t,e){return console.log(t),this.http.post(`${n.a.API_BASE_URL}/${e}/create`,t,{headers:this.headers})}edit(t,e,i){return this.http.patch(`${n.a.API_BASE_URL}/${i}/edit/${t}`,e,{headers:this.headers})}editUserRole(t,e){return this.http.patch(`${n.a.API_BASE_URL}/users/role/${t}`,e,{headers:this.headers})}delete(t,e){return this.http.delete(`${n.a.API_BASE_URL}/${e}/delete/${t}`,{headers:this.headers})}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(o.a))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},cW5t:function(t,e,i){"use strict";i.r(e),i.d(e,"LotesModule",function(){return S});var o=i("ofXK"),n=i("tyNb"),r=i("XNiG"),a=i("1G5W"),c=i("nYR2"),s=i("AytR"),l=i("PSD3"),d=i.n(l),b=i("3Pt+"),m=i("fXoL"),u=i("N+K7"),p=i("T9Ob"),f=i("FQRV");function g(t,e){if(1&t){const t=m.Qb();m.Pb(0,"div",2),m.Pb(1,"div",3),m.Pb(2,"div",4),m.Pb(3,"app-table",5),m.Wb("onRecargar",function(e){return m.gc(t),m.Yb().recargarLotes(e)})("onCreate",function(){return m.gc(t),m.Yb().creatLote()})("onEdit",function(e){return m.gc(t),m.Yb().editarLote(e)})("onDelete",function(e){return m.gc(t),m.Yb().borrarLote(e)}),m.Ob(),m.Ob(),m.Ob(),m.Ob()}if(2&t){const t=m.Yb();m.zb(3),m.dc("title","Lotes")("filasTabla",t.tableData)("encabezadosTabla",t.encabezadosTabla)("totalSection",null==t.tableData?null:t.tableData.length)("loading",t.loading)}}function h(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Este dato es requerido"),m.Ob())}function v(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Los formatos aceptados son JPG, JPEG y PNG"),m.Ob())}function P(t,e){if(1&t&&(m.Pb(0,"option",18),m.mc(1),m.Ob()),2&t){const t=e.$implicit;m.dc("value",t.id),m.zb(1),m.oc(" ",t.nombre," ")}}function O(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Este dato es requerido"),m.Ob())}function L(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Este dato es requerido"),m.Ob())}function k(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Debe tener al menos 6 caracteres"),m.Ob())}function y(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Este dato es requerido"),m.Ob())}function C(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Debe tener al menos 10 caracteres"),m.Ob())}function w(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Este dato es requerido"),m.Ob())}function I(t,e){1&t&&(m.Pb(0,"span",28),m.mc(1,"Debe ser mayor a 1"),m.Ob())}function z(t,e){if(1&t){const t=m.Qb();m.Pb(0,"div",2),m.Pb(1,"div",3),m.Pb(2,"div",6),m.Pb(3,"h1",7),m.mc(4),m.Ob(),m.Ob(),m.Pb(5,"form",8),m.Wb("ngSubmit",function(){return m.gc(t),m.Yb().formSubmit()}),m.Pb(6,"div",4),m.Pb(7,"div",9),m.Pb(8,"div",10),m.Wb("click",function(){return m.gc(t),m.fc(11).click()}),m.Lb(9,"img",11),m.Pb(10,"input",12,13),m.Wb("change",function(e){return m.gc(t),m.Yb().showSelectedImage(e)}),m.Ob(),m.Pb(12,"div",14),m.kc(13,h,2,0,"span",15),m.kc(14,v,2,0,"span",15),m.Ob(),m.Ob(),m.Ob(),m.Pb(15,"div",16),m.Pb(16,"label"),m.mc(17,"Zona de construcci\xf3n*"),m.Ob(),m.Pb(18,"select",17),m.Pb(19,"option",18),m.mc(20,"--Seleccionar una zona--"),m.Ob(),m.kc(21,P,2,2,"option",19),m.Ob(),m.Pb(22,"div",14),m.kc(23,O,2,0,"span",15),m.Ob(),m.Ob(),m.Pb(24,"div",0),m.Pb(25,"div",2),m.Pb(26,"div",16),m.Pb(27,"div",20),m.Lb(28,"input",21),m.Pb(29,"div",14),m.kc(30,L,2,0,"span",15),m.kc(31,k,2,0,"span",15),m.Ob(),m.Ob(),m.Ob(),m.Pb(32,"div",16),m.Pb(33,"div",20),m.Lb(34,"textarea",22),m.Pb(35,"div",14),m.kc(36,y,2,0,"span",15),m.kc(37,C,2,0,"span",15),m.Ob(),m.Ob(),m.Ob(),m.Pb(38,"div",16),m.Pb(39,"div",20),m.Lb(40,"input",23),m.Pb(41,"div",14),m.kc(42,w,2,0,"span",15),m.kc(43,I,2,0,"span",15),m.Ob(),m.Ob(),m.Ob(),m.Pb(44,"div",16),m.Pb(45,"label"),m.mc(46,"Vendido*"),m.Ob(),m.Pb(47,"select",24),m.Pb(48,"option",18),m.mc(49,"Si"),m.Ob(),m.Pb(50,"option",18),m.mc(51,"No"),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Pb(52,"div",25),m.Pb(53,"button",26),m.mc(54," Confirmar "),m.Ob(),m.Pb(55,"button",27),m.Wb("click",function(){return m.gc(t),m.Yb().recargarLotes(!0)}),m.mc(56," Volver "),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob()}if(2&t){const t=m.Yb();m.zb(4),m.oc("",t.crudAction," lote"),m.zb(1),m.dc("formGroup",t.loteForm),m.zb(4),m.dc("src",t.imageToShow,m.hc),m.zb(1),m.dc("hidden",!0),m.zb(3),m.dc("ngIf",(null==t.loteForm.controls.image.errors?null:t.loteForm.controls.image.errors.required)&&t.loteForm.controls.image.touched),m.zb(1),m.dc("ngIf",!t.acceptedFileTypes),m.zb(5),m.dc("value",null),m.zb(2),m.dc("ngForOf",t.zonasDeConstruccion),m.zb(2),m.dc("ngIf",(null==t.loteForm.controls.category.errors?null:t.loteForm.controls.category.errors.required)&&t.loteForm.controls.category.touched),m.zb(7),m.dc("ngIf",(null==t.loteForm.controls.title.errors?null:t.loteForm.controls.title.errors.required)&&t.loteForm.controls.title.touched),m.zb(1),m.dc("ngIf",(null==t.loteForm.controls.title.errors?null:t.loteForm.controls.title.errors.minlength)&&t.loteForm.controls.title.touched),m.zb(5),m.dc("ngIf",(null==t.loteForm.controls.description.errors?null:t.loteForm.controls.description.errors.required)&&t.loteForm.controls.description.touched),m.zb(1),m.dc("ngIf",(null==t.loteForm.controls.description.errors?null:t.loteForm.controls.description.errors.minlength)&&t.loteForm.controls.description.touched),m.zb(5),m.dc("ngIf",(null==t.loteForm.controls.price.errors?null:t.loteForm.controls.price.errors.required)&&t.loteForm.controls.price.touched),m.zb(1),m.dc("ngIf",(null==t.loteForm.controls.price.errors?null:t.loteForm.controls.price.errors.min)&&t.loteForm.controls.price.touched),m.zb(5),m.dc("value","true"),m.zb(2),m.dc("value","false")}}const F=[{path:"",component:(()=>{class t{constructor(t,e,i){this.httpSrv=t,this.adminPanelCrudService=e,this.fb=i,this.someClass=!0,this.encabezadosTabla=["T\xedtulo","Descripci\xf3n","Precio","Vendido"],this.tableData=[],this.loading=!0,this.lotes=[],this.isCreating=!1,this.isEditing=!1,this.crudAction="",this.zonasDeConstruccion=[],this.imageToShow="../../../../../assets/no-image.png",this.acceptedFileTypes=!0,this.destroy$=new r.a,this.crearForm()}ngOnInit(){this.getLotes()}crearForm(){this.loteForm=this.fb.group({title:["",[b.m.required,b.m.minLength(6)]],description:["",[b.m.required,b.m.minLength(10)]],image:[""],price:["",[b.m.required,b.m.min(1)]],sold:["false"],category:[null,[b.m.required]]})}showSelectedImage(t){var e;const i=null===(e=t.target)||void 0===e?void 0:e.files[0];if(this.acceptedFileTypes="image/jpg"===i.type||"image/jpeg"===i.type||"image/png"===i.type,i&&this.acceptedFileTypes){this.fileToUpload=i;const t=new FileReader;t.readAsDataURL(i),t.onload=()=>this.imageToShow=t.result}else this.imageToShow="../../../../../assets/no-image.png"}formSubmit(){var t,e,i,o,n;if(this.loteForm.markAllAsTouched(),this.loteForm.valid){const r=new FormData;r.append("title",null===(t=this.loteForm.controls.title)||void 0===t?void 0:t.value),r.append("description",null===(e=this.loteForm.controls.description)||void 0===e?void 0:e.value),r.append("price",null===(i=this.loteForm.controls.price)||void 0===i?void 0:i.value),r.append("sold",null===(o=this.loteForm.controls.sold)||void 0===o?void 0:o.value),r.append("image",this.fileToUpload),r.append("category",null===(n=this.loteForm.controls.category)||void 0===n?void 0:n.value),"Crear"===this.crudAction?this.crearLoteEnLaDb(r):this.editarLoteEnLaDb(r)}}getLotes(){this.httpSrv.getAllZones().pipe(Object(a.a)(this.destroy$)).subscribe(t=>{for(const e of t.data)this.zonasDeConstruccion.push({id:e.id,nombre:e.title}),this.httpSrv.getLotes(e.id.toString()).pipe(Object(a.a)(this.destroy$),Object(c.a)(()=>this.loading=!1)).subscribe(t=>{var e;null===(e=null==t?void 0:t.data)||void 0===e||e.Batches.forEach(t=>{var e,i;this.tableData.push({imagen:`${s.a.API_IMAGE_URL}/${t.image}`,item2:t.title?t.title:"Vac\xedo",item3:t.description?t.description:"Vac\xedo",item4:(null===(e=t.price)||void 0===e?void 0:e.toString())?null===(i=t.price)||void 0===i?void 0:i.toString():"Vac\xedo",item6:this.setearElEstadoVendidoONo(t.sold),id:t.id}),this.lotes.push(t)})},()=>{d.a.fire("Error","Tuvimos un error desconocido, por favor intenta recargar la p\xe1gina o espera un rato.","error")})},t=>{d.a.fire("Error","Tuvimos un error desconocido, por favor intenta recargar la p\xe1gina o espera un rato.","error")})}setearElEstadoVendidoONo(t){let e="";return e="true"===t?"Si":"No",e}recargarLotes(t){t&&(this.resetsetControls(),this.tableData=[],this.zonasDeConstruccion=[],this.isEditing=!1,this.isCreating=!1,this.getLotes())}resetsetControls(){this.loteForm.controls.title.setValue(""),this.loteForm.controls.description.setValue(""),this.loteForm.controls.category.setValue(""),this.loteForm.controls.price.setValue(""),this.loteForm.controls.sold.setValue(""),this.loteForm.controls.image.setValue(""),this.imageToShow="../../../../../assets/no-image.png"}creatLote(){this.crudAction="Crear",this.isCreating=!0,this.isEditing=!1}crearLoteEnLaDb(t){this.adminPanelCrudService.create(t,"batches").pipe(Object(a.a)(this.destroy$)).subscribe(t=>{var e;this.recargarLotes(!0),this.alertFailureOrSuccess(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.status)},()=>{this.isCreating=!1,this.isEditing=!1,this.recargarLotes(!0),d.a.fire("Error","Tuvimos un error desconocido, por favor intenta recargar la p\xe1gina o espera un rato.","error")})}editarLote(t){if(this.encontrarLoteSeleccionado(t)){this.crudAction="Editar",this.isEditing=!0,this.isCreating=!1;const e=this.lotes.find(e=>e.id===t);e&&(this.loteID=t,this.loteForm.controls.title.setValue(e.title),this.loteForm.controls.description.setValue(e.description),this.loteForm.controls.category.setValue(e.categories_id),this.loteForm.controls.price.setValue(e.price),this.loteForm.controls.sold.setValue(e.sold),this.imageToShow=`${s.a.API_IMAGE_URL}/${e.image}`)}}editarLoteEnLaDb(t){this.adminPanelCrudService.edit(this.loteID,t,"batches").pipe(Object(a.a)(this.destroy$)).subscribe(t=>{var e;this.recargarLotes(!0),this.alertFailureOrSuccess(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.status)},()=>{this.recargarLotes(!0),d.a.fire("Error","Tuvimos un error desconocido, por favor intenta recargar la p\xe1gina o espera un rato.","error")})}borrarLote(t){this.encontrarLoteSeleccionado(t)&&d.a.fire({title:"\xbfSeguro quer\xe9s elimninar el lote seleccionado?",showDenyButton:!0,confirmButtonText:"Si, borrar",denyButtonText:"No"}).then(e=>{e.isConfirmed&&this.borrarLoteDeLaDb(t)})}borrarLoteDeLaDb(t){this.adminPanelCrudService.delete(t,"batches").pipe(Object(a.a)(this.destroy$)).subscribe(t=>{var e;this.recargarLotes(!0),this.alertFailureOrSuccess(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.status)},()=>{d.a.fire("\xa1Lo sentimos!","No pudimos realizar el pedido correctamente, por favor actualiz\xe1 la p\xe1gina e intent\xe1 de nuevo","error")})}encontrarLoteSeleccionado(t){return this.lotes.find(e=>e.id===t)}alertFailureOrSuccess(t){200===t||201===t?d.a.fire("\xa1Excelente!","La zona se cre\xf3 correctamente","success"):d.a.fire("Error","No pudimos crear la zona, por favor intent\xe1 de nuevo recargando la p\xe1gina","error")}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Kb(u.a),m.Kb(p.a),m.Kb(b.c))},t.\u0275cmp=m.Eb({type:t,selectors:[["app-lotes"]],hostVars:2,hostBindings:function(t,e){2&t&&m.Cb("admin-panel-container",e.someClass)},decls:3,vars:2,consts:[[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"card"],[1,"card-body"],[3,"title","filasTabla","encabezadosTabla","totalSection","loading","onRecargar","onCreate","onEdit","onDelete"],[1,"card-header"],[1,"primary-dark"],[1,"form","p-t-20","form-material",3,"formGroup","ngSubmit"],[1,"row","justify-content-center"],[1,"col-md-4","mb-2",3,"click"],["alt","Lote",1,"img-responsive",3,"src"],["type","file","formControlName","image",3,"hidden","change"],["imageInput",""],[1,"p-2"],["class","text-danger",4,"ngIf"],[1,"form-group"],["formControlName","category",1,"form-control","custom-select"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],["type","text","id","exampleInputuname2","placeholder","T\xedtulo*","formControlName","title",1,"form-control"],["type","text","id","exampleInputuname2","placeholder","Descripci\xf3n*","formControlName","description","rows","5",1,"form-control"],["type","number","id","exampleInputuname2","placeholder","Precio*","formControlName","price",1,"form-control"],["formControlName","sold",1,"form-control","custom-select"],[1,"card-footer"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10","bgc-primary-dark"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","m-r-10",3,"click"],[1,"text-danger"]],template:function(t,e){1&t&&(m.Pb(0,"div",0),m.kc(1,g,4,5,"div",1),m.kc(2,z,57,17,"div",1),m.Ob()),2&t&&(m.zb(1),m.dc("ngIf",!e.isEditing&&!e.isCreating),m.zb(1),m.dc("ngIf",e.isCreating||e.isEditing))},directives:[o.l,f.a,b.n,b.h,b.e,b.b,b.g,b.d,b.l,b.i,b.o,o.k,b.j],styles:[""]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.Ib({type:t}),t.\u0275inj=m.Hb({imports:[[n.f.forChild(F)],n.f]}),t})();var $=i("6eV/");let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.Ib({type:t}),t.\u0275inj=m.Hb({imports:[[o.b,Y,$.a,b.k]]}),t})()}}]);
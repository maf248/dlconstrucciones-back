{"version":3,"sources":["./src/app/modules/admin-panel/pages/manage-proyect-assets/manage-proyect-assets.component.ts","./src/app/modules/admin-panel/pages/manage-proyect-assets/manage-proyect-assets.component.html","./src/app/modules/admin-panel/pages/manage-proyect-assets/manage-proyect-assets-routing.module.ts","./src/app/modules/admin-panel/pages/manage-proyect-assets/manage-proyect-assets.module.ts"],"names":[],"mappings":"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","file":"pages-manage-proyect-assets-manage-proyect-assets-module.js","sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  Host,\r\n  HostBinding,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport {\r\n  alertFailureOrSuccessOnCRUDAction,\r\n  customMessageAlert,\r\n  noConnectionAlert,\r\n  unknownErrorAlert,\r\n} from 'src/app/helpers/alerts';\r\nimport Swal, { SweetAlertResult } from 'sweetalert2';\r\nimport { CuerpoTabla } from '../../interfaces/tabla.interface';\r\nimport { OneProjectRes, ProyectAssets } from '../../interfaces/users.interface';\r\nimport { AdminPanelCrudService } from '../../services/admin-panel-crud.service';\r\nimport { ProjectsService } from '../../services/projects.service';\r\n\r\ninterface imageToShowObj {\r\n  path: string;\r\n  type: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-manage-proyect-assets',\r\n  templateUrl: './manage-proyect-assets.component.html',\r\n  styleUrls: ['./manage-proyect-assets.component.scss'],\r\n})\r\nexport class ManageProyectAssetsComponent implements OnInit {\r\n  @HostBinding('class.admin-panel-container') someClass: Host = true;\r\n  @ViewChild('imageInput') imageInput!: ElementRef<HTMLInputElement>;\r\n\r\n  public assets: ProyectAssets[] = [];\r\n  public tableData: CuerpoTabla[] = [];\r\n  public encabezadosTabla: string[] = [];\r\n  public isCreating: boolean = false;\r\n  public isEditing: boolean = false;\r\n  public crudAction: string = '';\r\n  public assetsForm!: FormGroup;\r\n  public assetId!: number;\r\n  public imageToShow: imageToShowObj[] = [\r\n    {\r\n      path: '../../../../../assets/no-image.png',\r\n      type: 'image/png',\r\n    },\r\n  ];\r\n  public fileToUpload: File[] = [];\r\n  public acceptedFileTypes: boolean = true;\r\n  public creationImageError: string = '';\r\n  private projectID!: number;\r\n  private destroy$: Subject<boolean> = new Subject();\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private projectsService: ProjectsService,\r\n    private fb: FormBuilder,\r\n    private adminPanelCrudService: AdminPanelCrudService\r\n  ) {\r\n    this.getprojectId();\r\n    if (this.projectID) this.createForm();\r\n    else this.router.navigateByUrl('/admin/proyectos');\r\n  }\r\n\r\n  public getprojectId(): void {\r\n    this.projectID = this.router.getCurrentNavigation()?.extras?.state?.id;\r\n  }\r\n\r\n  private createForm(): void {\r\n    this.assetsForm = this.fb.group({\r\n      asset: [''],\r\n    });\r\n  }\r\n\r\n  public openInput(): void {\r\n    this.imageInput.nativeElement.click();\r\n  }\r\n\r\n  public async showSelectedImage(e: any): Promise<void> {\r\n    if (!this.assetsForm.controls.asset?.value) {\r\n      this.creationImageError = 'El archivo es obligatorio';\r\n      return;\r\n    } else {\r\n      this.creationImageError = '';\r\n    }\r\n\r\n    let files = Array.from(e.target?.files as FileList);\r\n\r\n    files = await this.checkAmountOfFiles(files);\r\n\r\n    this.acceptedFileTypes = await this.checkFilesType(files);\r\n\r\n    if (files.length && this.acceptedFileTypes) {\r\n      this.imageToShow = [];\r\n      this.fileToUpload = files;\r\n      files.forEach((file) => {\r\n        // if (file.type.includes('image')) {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () =>\r\n          this.imageToShow.push({\r\n            path: reader.result as string,\r\n            type: file.type,\r\n          });\r\n        // } else {\r\n        //   this.imageToShow.push('../../../../../assets/no-image-video.jpg');\r\n        // }\r\n      });\r\n    } else {\r\n      this.imageToShow = [\r\n        {\r\n          path: '../../../../../assets/no-image.png',\r\n          type: 'image/png',\r\n        },\r\n      ];\r\n      this.fileToUpload = [];\r\n    }\r\n  }\r\n\r\n  private checkAmountOfFiles(files: File[]): Promise<File[]> {\r\n    let filesHaveVideo: boolean = false;\r\n    let acceptedLength: number = 10;\r\n    files.forEach((file) => {\r\n      file.type.includes('video') ? (filesHaveVideo = true) : null;\r\n    });\r\n\r\n    if (filesHaveVideo) {\r\n      acceptedLength = 5;\r\n    }\r\n    return new Promise((resolve) => {\r\n      if (files.length > acceptedLength) {\r\n        customMessageAlert(\r\n          'Atención',\r\n          `No se pueden subir mas de ${acceptedLength} archivos`,\r\n          'OK',\r\n          'info'\r\n        );\r\n        files = files.slice(0, acceptedLength);\r\n      }\r\n      resolve(files);\r\n    });\r\n  }\r\n\r\n  private checkFilesType(files: File[]): Promise<boolean> {\r\n    return new Promise((resolve) => {\r\n      let validator: boolean | 'valido' = 'valido';\r\n      files.forEach((file) => {\r\n        if (\r\n          file.type.includes('image/jpg') ||\r\n          file.type.includes('image/jpeg') ||\r\n          file.type.includes('image/png') ||\r\n          file.type.includes('video/mp4') ||\r\n          file.type.includes('video/avi') ||\r\n          file.type.includes('video/mov') ||\r\n          file.type.includes('video/wmv') ||\r\n          file.type.includes('video/mkv')\r\n        ) {\r\n        } else {\r\n          validator = false;\r\n        }\r\n      });\r\n      validator === 'valido' ? resolve(true) : resolve(false);\r\n    });\r\n  }\r\n\r\n  public formSubmit(): void {\r\n    this.assetsForm.markAllAsTouched();\r\n\r\n    if (!this.assetsForm.controls.asset?.value) {\r\n      this.creationImageError = 'El archivo es obligatorio';\r\n      return;\r\n    } else {\r\n      this.creationImageError = '';\r\n    }\r\n\r\n    if (this.assetsForm.valid) {\r\n      const formData: FormData = new FormData();\r\n      if (this.fileToUpload.length) {\r\n        formData.append('projects_id', this.projectID.toString());\r\n        this.fileToUpload.forEach((file) => {\r\n          formData.append('asset', file);\r\n        });\r\n        this.crudAction === 'Crear'\r\n          ? this.crearAssetEnLaDb(formData)\r\n          : this.editarAssetEnLaDb(formData);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAssets();\r\n  }\r\n\r\n  private getAssets(): void {\r\n    this.projectsService\r\n      .getOneProject(this.projectID)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(\r\n        (res: OneProjectRes) => {\r\n          if (res?.meta?.status.toString().includes('20')) {\r\n            this.assets = res?.data?.Assets!;\r\n            this.getProjectAssetsFiles();\r\n          } else {\r\n            unknownErrorAlert(res);\r\n          }\r\n        },\r\n        (err) => noConnectionAlert(err)\r\n      );\r\n  }\r\n\r\n  private getProjectAssetsFiles(): void {\r\n    for (const asset of this.assets) {\r\n      this.projectsService\r\n        .getAssetsDeUnProyecto(asset.asset)\r\n        .pipe(takeUntil(this.destroy$))\r\n        .subscribe({\r\n          next: (blob) => {\r\n            this.setTableData(blob, asset);\r\n          },\r\n          error: (err) => noConnectionAlert(err),\r\n        });\r\n    }\r\n  }\r\n\r\n  private setTableData(blob: Blob, asset: ProyectAssets): void {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(blob);\r\n    reader.onload = () => {\r\n      this.tableData.push({\r\n        id: asset.id,\r\n        imagen: reader.result as string,\r\n        tipoDeArchivo: blob.type,\r\n      });\r\n    };\r\n  }\r\n\r\n  public recargarAssets(recargar: boolean): void {\r\n    if (recargar) {\r\n      this.resetsetControls();\r\n      this.tableData = [];\r\n      this.assets = [];\r\n      this.isCreating = false;\r\n      this.isEditing = false;\r\n      this.fileToUpload = [];\r\n      this.imageToShow = [\r\n        {\r\n          path: '../../../../../assets/no-image.png',\r\n          type: 'image/png',\r\n        },\r\n      ];\r\n      this.getAssets();\r\n    }\r\n  }\r\n\r\n  private resetsetControls(): void {\r\n    this.assetsForm.controls.asset?.setValue('');\r\n  }\r\n\r\n  public crearAsset(): void {\r\n    this.crudAction = 'Crear';\r\n    this.isCreating = true;\r\n    this.isEditing = false;\r\n  }\r\n\r\n  private crearAssetEnLaDb(payload: FormData): void {\r\n    this.adminPanelCrudService\r\n      .create(payload, 'assets')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(\r\n        (res) => {\r\n          this.recargarAssets(true);\r\n          alertFailureOrSuccessOnCRUDAction(res, 'creó', 'archivo');\r\n        },\r\n        (err) => {\r\n          this.recargarAssets(true);\r\n          noConnectionAlert(err);\r\n        }\r\n      );\r\n  }\r\n\r\n  public editarAssets(assetId: number): void {\r\n    this.crudAction = 'Editar';\r\n    this.isEditing = true;\r\n    this.isCreating = false;\r\n    const asset: ProyectAssets | undefined = this.assets.find(\r\n      (asset: ProyectAssets) => asset.id === assetId\r\n    );\r\n    asset ? (this.assetId = assetId) : null;\r\n  }\r\n\r\n  private editarAssetEnLaDb(payload: FormData): void {\r\n    this.adminPanelCrudService\r\n      .edit(this.assetId, payload, 'assets')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(\r\n        (res) => {\r\n          this.recargarAssets(true);\r\n          alertFailureOrSuccessOnCRUDAction(res, 'editó', 'archivo');\r\n        },\r\n        (err) => {\r\n          this.recargarAssets(true);\r\n          noConnectionAlert(err);\r\n        }\r\n      );\r\n  }\r\n\r\n  public borrarAsset(assetId: number): void {\r\n    Swal.fire({\r\n      title: '¿Seguro querés elimninar el archivo seleccionado?',\r\n      showDenyButton: true,\r\n      confirmButtonText: 'Si, borrar',\r\n      denyButtonText: `No`,\r\n    }).then((result: SweetAlertResult<any>) => {\r\n      result.isConfirmed ? this.borrarAssetEnLaDb(assetId) : null;\r\n    });\r\n  }\r\n\r\n  private borrarAssetEnLaDb(assetId: number): void {\r\n    this.adminPanelCrudService\r\n      .delete(assetId, 'assets')\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(\r\n        (res) => {\r\n          this.recargarAssets(true);\r\n          alertFailureOrSuccessOnCRUDAction(res, 'borró', 'archivo');\r\n        },\r\n        (err) => {\r\n          this.recargarAssets(true);\r\n          noConnectionAlert(err);\r\n        }\r\n      );\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col\" *ngIf=\"!isEditing && !isCreating\">\r\n    <div class=\"card\">\r\n      <div class=\"card-body\">\r\n        <app-table\r\n          *ngIf=\"assets && tableData\"\r\n          title=\"Galería\"\r\n          [encabezadosTabla]=\"encabezadosTabla\"\r\n          [filasTabla]=\"tableData\"\r\n          [totalSection]=\"assets?.length!\"\r\n          (onRecargar)=\"recargarAssets($event)\"\r\n          (onCreate)=\"crearAsset()\"\r\n          (onEdit)=\"editarAssets($event)\"\r\n          (onDelete)=\"borrarAsset($event)\"\r\n        ></app-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col\" *ngIf=\"isCreating || isEditing\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">\r\n        <h1 class=\"primary-dark\">{{ crudAction }} Galería</h1>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <form\r\n          class=\"form p-t-20 form-material\"\r\n          [formGroup]=\"assetsForm\"\r\n          (ngSubmit)=\"formSubmit()\"\r\n        >\r\n          <div class=\"card-body\">\r\n            <div class=\"row justify-content-center\">\r\n              <div\r\n                *ngFor=\"let file of imageToShow\"\r\n                class=\"col-md-4 text-center mb-2\"\r\n                (click)=\"openInput()\"\r\n              >\r\n                <ng-container\r\n                  *ngIf=\"file.type.includes('image'); else videoTemplate\"\r\n                >\r\n                  <img\r\n                    class=\"img-responsive image-gallery\"\r\n                    [src]=\"file.path\"\r\n                    alt=\"Proyecto\"\r\n                  />\r\n                </ng-container>\r\n                <ng-template #videoTemplate>\r\n                  <div class=\"embed-responsive embed-responsive-21by9\">\r\n                    <video\r\n                      class=\"embed-responsive-item w-100\"\r\n                      [src]=\"file.path\"\r\n                      [autoplay]=\"false\"\r\n                      [muted]=\"true\"\r\n                      [loop]=\"true\"\r\n                      [controls]=\"true\"\r\n                    ></video>\r\n                  </div>\r\n                </ng-template>\r\n              </div>\r\n              <ng-container\r\n                *ngIf=\"crudAction === 'Crear'; else isEditingTemplate\"\r\n              >\r\n                <input\r\n                  [hidden]=\"true\"\r\n                  #imageInput\r\n                  type=\"file\"\r\n                  formControlName=\"asset\"\r\n                  (change)=\"showSelectedImage($event)\"\r\n                  multiple\r\n                />\r\n                <div class=\"p-2 text-center\">\r\n                  <span class=\"text-danger\" *ngIf=\"creationImageError\">{{\r\n                    creationImageError\r\n                  }}</span>\r\n                  <span class=\"text-danger\" *ngIf=\"!acceptedFileTypes\"\r\n                    >Los formatos aceptados son JPG, JPEG y PNG</span\r\n                  >\r\n                </div>\r\n              </ng-container>\r\n              <ng-template #isEditingTemplate>\r\n                <input\r\n                  [hidden]=\"true\"\r\n                  #imageInput\r\n                  type=\"file\"\r\n                  formControlName=\"asset\"\r\n                  (change)=\"showSelectedImage($event)\"\r\n                />\r\n                <div class=\"p-2 text-center\">\r\n                  <span class=\"text-danger\" *ngIf=\"!acceptedFileTypes\"\r\n                    >Los formatos aceptados son JPG, JPEG y PNG</span\r\n                  >\r\n                </div>\r\n              </ng-template>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-footer text-center\">\r\n            <button\r\n              type=\"submit\"\r\n              class=\"btn btn-success waves-effect waves-light m-r-10 bgc-primary-dark\"\r\n            >\r\n              Confirmar\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              (click)=\"recargarAssets(true)\"\r\n              class=\"btn btn-danger waves-effect waves-light m-r-10\"\r\n            >\r\n              Volver\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ManageProyectAssetsComponent } from './manage-proyect-assets.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ManageProyectAssetsComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ManageProyectAssetsRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ManageProyectAssetsRoutingModule } from './manage-proyect-assets-routing.module';\r\nimport { ManageProyectAssetsComponent } from './manage-proyect-assets.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  declarations: [ManageProyectAssetsComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ManageProyectAssetsRoutingModule,\r\n    ReactiveFormsModule,\r\n    ComponentsModule,\r\n  ],\r\n})\r\nexport class ManageProyectAssetsModule {}\r\n"],"sourceRoot":"webpack:///"}
(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{Svib:function(r,e,o){"use strict";o.r(e),o.d(e,"RecuperarContraseniaPasoDosModule",function(){return k});var s=o("ofXK"),a=o("tyNb"),n=o("3Pt+"),t=o("XNiG"),i=o("1G5W"),d=o("ZLyn"),l=o("fXoL"),u=o("IT5Z"),c=o("R3Qk");function b(r,e){1&r&&(l.Pb(0,"span",21),l.mc(1,"Este dato es requerido"),l.Ob())}function p(r,e){1&r&&(l.Pb(0,"span",21),l.mc(1,"Por favor ingres\xe1 un email v\xe1lido"),l.Ob())}function m(r,e){1&r&&(l.Pb(0,"span",21),l.mc(1,"Este dato es requerido"),l.Ob())}function v(r,e){1&r&&(l.Pb(0,"span",21),l.mc(1,"La contrase\xf1a debe tener un m\xednimo de 8 caracteres, incluyendo una min\xfascula, una may\xfascula, un n\xfamero y un s\xedmbolo"),l.Ob())}function w(r,e){1&r&&(l.Pb(0,"li"),l.mc(1," La contrase\xf1a debe tener al menos 8 caracteres "),l.Ob())}function h(r,e){1&r&&(l.Pb(0,"li"),l.mc(1," La contrase\xf1a debe contener al menos un n\xfamero "),l.Ob())}function f(r,e){1&r&&(l.Pb(0,"li"),l.mc(1," La contrase\xf1a debe contener al menos una letra min\xfascula "),l.Ob())}function P(r,e){1&r&&(l.Pb(0,"li"),l.mc(1," La contrase\xf1a debe tener al menos una letra may\xfascula "),l.Ob())}function g(r,e){1&r&&(l.Pb(0,"li"),l.mc(1," La contrase\xf1a debe tener al menos alguno de los siguientes s\xedmbolos *._%+- "),l.Ob())}function O(r,e){if(1&r&&(l.Pb(0,"div",10),l.Pb(1,"ul",22),l.kc(2,w,2,0,"li",23),l.kc(3,h,2,0,"li",23),l.kc(4,f,2,0,"li",23),l.kc(5,P,2,0,"li",23),l.kc(6,g,2,0,"li",23),l.Ob(),l.Ob()),2&r){const r=l.Yb();l.zb(2),l.dc("ngIf",r.showStrongPasswordErrorMsgs()),l.zb(1),l.dc("ngIf",r.showStrongPasswordErrorMsgs()),l.zb(1),l.dc("ngIf",r.showStrongPasswordErrorMsgs()),l.zb(1),l.dc("ngIf",r.showStrongPasswordErrorMsgs()),l.zb(1),l.dc("ngIf",r.showStrongPasswordErrorMsgs())}}function y(r,e){1&r&&(l.Pb(0,"span",21),l.mc(1,"Este dato es requerido"),l.Ob())}function C(r,e){1&r&&(l.Pb(0,"span",21),l.mc(1,"Las contrase\xf1as no coinciden"),l.Ob())}const F=[{path:"",component:(()=>{class r{constructor(r,e,o,s){this.fb=r,this.authService=e,this.router=o,this.userStore=s,this.passwordEye="fa fa-eye-slash",this.userWantsToSeePassword=!1,this.repeatPasswordEye="fa fa-eye-slash",this.userWantsToSeeRepeatPassword=!1,this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.destroy$=new t.a,this.createForm()}createForm(){this.nuevaContraseniaForm=this.fb.group({email:["",[n.m.required,n.m.pattern(this.emailPattern)]],password:["",[n.m.required]],passwordRepeat:["",n.m.required]},{validator:[this.passwordMatchFormValidator,this.validateStrongPassword]})}passwordMatchFormValidator(r){const e=r.get("password"),o=r.get("passwordRepeat");o.setErrors(e.value===o.value?null:{notMatch:!0})}validateStrongPassword(r){const e=r.get("password");/\d/.test(null==e?void 0:e.value)?/[a-z]/.test(null==e?void 0:e.value)?/[A-Z]/.test(null==e?void 0:e.value)?/[*._%+-]/.test(null==e?void 0:e.value)?(null==e?void 0:e.value.length)<8&&(null==e||e.setErrors({minlength:!0})):null==e||e.setErrors({notSymbols:!0}):null==e||e.setErrors({noUppercase:!0}):null==e||e.setErrors({noLowercase:!0}):null==e||e.setErrors({notDigits:!0})}showStrongPasswordErrorMsgs(){var r,e,o,s,a;return this.nuevaContraseniaForm.controls.password.touched&&((null===(r=this.nuevaContraseniaForm.controls.password.errors)||void 0===r?void 0:r.notDigits)||(null===(e=this.nuevaContraseniaForm.controls.password.errors)||void 0===e?void 0:e.noLowercase)||(null===(o=this.nuevaContraseniaForm.controls.password.errors)||void 0===o?void 0:o.noUppercase)||(null===(s=this.nuevaContraseniaForm.controls.password.errors)||void 0===s?void 0:s.notSymbols)||(null===(a=this.nuevaContraseniaForm.controls.password.errors)||void 0===a?void 0:a.minlength))}showPassword(r){this.userWantsToSeePassword=!this.userWantsToSeePassword,this.passwordEye=this.userWantsToSeePassword?"fa fa-eye":"fa fa-eye-slash",r.type=this.userWantsToSeePassword?"text":"password"}showRepeatPassword(r){this.userWantsToSeeRepeatPassword=!this.userWantsToSeeRepeatPassword,this.repeatPasswordEye=this.userWantsToSeeRepeatPassword?"fa fa-eye":"fa fa-eye-slash",r.type=this.userWantsToSeeRepeatPassword?"text":"password"}guardarNuevaContrasenia(){this.nuevaContraseniaForm.markAllAsTouched(),this.nuevaContraseniaForm.valid&&this.authService.guardarNuevaContrasenia(this.nuevaContraseniaForm.value).pipe(Object(i.a)(this.destroy$)).subscribe({next:r=>{var e,o,s,a;(null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.token)&&localStorage.setItem("access-token",null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.token),200===(null===(s=null==r?void 0:r.meta)||void 0===s?void 0:s.status)?this.guardarOAlertarUsuarioLogueado(null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.user):Object(d.e)()},error:r=>Object(d.d)(r)})}guardarOAlertarUsuarioLogueado(r){this.userStore.setUser({id:r.id,nombre:r.first_name,apellido:r.last_name,email:r.email,role:r.role,dni:r.dni,avatar:r.avatar,phone:r.phone,projects:r.Projects}),this.router.navigateByUrl("/main/auth/profile")}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(l.Kb(n.c),l.Kb(u.a),l.Kb(a.c),l.Kb(c.a))},r.\u0275cmp=l.Eb({type:r,selectors:[["app-recuperar-contrasenia-paso-dos"]],decls:38,vars:12,consts:[[1,"row","animate__animated","animate__fadeIn","animate__slow"],[1,"col-lg-6"],[1,"card"],[1,"card-header"],[1,"primary-dark"],[1,"form-horizontal","form-material","p-t-20",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],[1,"input-group"],["type","email","id","exampleInputEmail2","placeholder","juan@tuemail.com*","formControlName","email",1,"form-control"],[1,"p-2"],["class","text-danger",4,"ngIf"],["type","password","id","exampleInputpwd2","placeholder","Escribir contrase\xf1a*","formControlName","password",1,"form-control"],["inputPassword",""],[1,"input-group-addon"],[3,"click"],["class","p-2",4,"ngIf"],["type","password","id","exampleInputpwd3","placeholder","Confirmar contrase\xf1a*","formControlName","passwordRepeat",1,"form-control"],["inputRepeatPassword",""],[1,"card-footer","text-center"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","bgc-primary-dark"],[1,"text-danger"],[1,"form-text","text-danger","list-unstyled"],[4,"ngIf"]],template:function(r,e){if(1&r){const r=l.Qb();l.Pb(0,"div",0),l.Pb(1,"div",1),l.Pb(2,"div",2),l.Pb(3,"div",3),l.Pb(4,"h2",4),l.mc(5,"Generar nueva contrase\xf1a"),l.Ob(),l.Ob(),l.Pb(6,"form",5),l.Wb("ngSubmit",function(){return e.guardarNuevaContrasenia()}),l.Pb(7,"div",6),l.Pb(8,"div",7),l.Pb(9,"div",8),l.Lb(10,"input",9),l.Pb(11,"div",10),l.kc(12,b,2,0,"span",11),l.kc(13,p,2,0,"span",11),l.Ob(),l.Ob(),l.Ob(),l.Pb(14,"div",7),l.Pb(15,"div",8),l.Lb(16,"input",12,13),l.Pb(18,"div",14),l.Pb(19,"i",15),l.Wb("click",function(){l.gc(r);const o=l.fc(17);return e.showPassword(o)}),l.Ob(),l.Ob(),l.Pb(20,"div",10),l.kc(21,m,2,0,"span",11),l.kc(22,v,2,0,"span",11),l.Ob(),l.Ob(),l.kc(23,O,7,5,"div",16),l.Ob(),l.Pb(24,"div",7),l.Pb(25,"div",8),l.Lb(26,"input",17,18),l.Pb(28,"div",14),l.Pb(29,"i",15),l.Wb("click",function(){l.gc(r);const o=l.fc(27);return e.showRepeatPassword(o)}),l.Ob(),l.Ob(),l.Pb(30,"div",10),l.kc(31,y,2,0,"span",11),l.kc(32,C,2,0,"span",11),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(33,"div",19),l.Pb(34,"div"),l.Pb(35,"div"),l.Pb(36,"button",20),l.mc(37," Guardar "),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}2&r&&(l.zb(6),l.dc("formGroup",e.nuevaContraseniaForm),l.zb(6),l.dc("ngIf",(null==e.nuevaContraseniaForm.controls.email.errors?null:e.nuevaContraseniaForm.controls.email.errors.required)&&e.nuevaContraseniaForm.controls.email.touched),l.zb(1),l.dc("ngIf",(null==e.nuevaContraseniaForm.controls.email.errors?null:e.nuevaContraseniaForm.controls.email.errors.pattern)&&e.nuevaContraseniaForm.controls.email.touched),l.zb(6),l.Bb(e.passwordEye),l.zb(2),l.dc("ngIf",(null==e.nuevaContraseniaForm.controls.password.errors?null:e.nuevaContraseniaForm.controls.password.errors.required)&&e.nuevaContraseniaForm.controls.password.touched),l.zb(1),l.dc("ngIf",(null==e.nuevaContraseniaForm.controls.password.errors?null:e.nuevaContraseniaForm.controls.password.errors.pattern)&&e.nuevaContraseniaForm.controls.password.touched),l.zb(1),l.dc("ngIf",e.showStrongPasswordErrorMsgs()),l.zb(6),l.Bb(e.repeatPasswordEye),l.zb(2),l.dc("ngIf",(null==e.nuevaContraseniaForm.controls.passwordRepeat.errors?null:e.nuevaContraseniaForm.controls.passwordRepeat.errors.required)&&e.nuevaContraseniaForm.controls.passwordRepeat.touched),l.zb(1),l.dc("ngIf",(null==e.nuevaContraseniaForm.controls.passwordRepeat.errors?null:e.nuevaContraseniaForm.controls.passwordRepeat.errors.notMatch)&&e.nuevaContraseniaForm.controls.passwordRepeat.touched))},directives:[n.n,n.h,n.e,n.b,n.g,n.d,s.m],styles:[".row[_ngcontent-%COMP%]{justify-content:center}"]}),r})()}];let S=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=l.Ib({type:r}),r.\u0275inj=l.Hb({imports:[[a.f.forChild(F)],a.f]}),r})(),k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=l.Ib({type:r}),r.\u0275inj=l.Hb({imports:[[s.c,S,n.k]]}),r})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"6eV/":function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("ofXK"),a=i("3Pt+"),r=i("tyNb"),o=i("fXoL");let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({imports:[[n.b,a.f,a.k,r.f]]}),e})()},FQRV:function(e,t,i){"use strict";i.d(t,"a",function(){return Y});var n=i("fXoL"),a=i("PSD3"),r=i.n(a),o=i("ofXK"),c=i("tyNb");function s(e,t){1&e&&(n.Pb(0,"div",9),n.Pb(1,"div",2),n.Pb(2,"div",3),n.Pb(3,"div",4),n.Pb(4,"div",10),n.Pb(5,"h4",11),n.mc(6,"Cargado"),n.Ob(),n.Lb(7,"i",12),n.Pb(8,"p",13),n.mc(9,"Aguarda un momento por favor"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob())}function l(e,t){if(1&e&&(n.Nb(0),n.Pb(1,"h6",28),n.mc(2),n.Zb(3,"lowercase"),n.Ob(),n.Mb()),2&e){const e=n.Yb(2);n.zb(2),n.pc(" ",e.totalSection," ",n.ac(3,2,e.title)," en mi p\xe1gina. ")}}function b(e,t){if(1&e&&(n.Pb(0,"h6",28),n.mc(1),n.Zb(2,"lowercase"),n.Ob()),2&e){const e=n.Yb(2);n.zb(1),n.qc(" ",e.searchingResults," ",n.ac(2,3,e.title)," encontrados de ",e.totalSection," totales. ")}}function d(e,t){1&e&&(n.Pb(0,"th",26),n.mc(1," Im\xe1gen / Avatar "),n.Ob())}function u(e,t){if(1&e&&(n.Pb(0,"th",29),n.mc(1),n.Ob()),2&e){const e=t.$implicit;n.zb(1),n.oc(" ",e," ")}}function m(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",38),n.Pb(1,"img",39),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).expandirImagen(t.imagen)}),n.Ob(),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.zb(1),n.dc("src",e.imagen,n.hc)}}function f(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item2)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item2.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item2,0,100),"",(null==e.item2?null:e.item2.length)>100?"...":""," ")}}function p(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item3)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item3.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item3,0,100),"",(null==e.item3?null:e.item3.length)>100?"...":""," ")}}function g(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item4)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item4.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item4,0,100),"",(null==e.item4?null:e.item4.length)>100?"...":""," ")}}function h(e,t){if(1&e&&(n.Pb(0,"td",41),n.mc(1),n.Ob()),2&e){const e=n.Yb().$implicit;n.Cb("pointer",+e.linkVerMas.value>100),n.dc("routerLink",e.linkVerMas.route),n.zb(1),n.oc(" ",e.linkVerMas.value," ")}}function v(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item6)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item6.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item6,0,100),"",(null==e.item6?null:e.item6.length)>100?"...":""," ")}}function P(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item7)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item7.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item7,0,100),"",(null==e.item7?null:e.item7.length)>100?"...":""," ")}}function O(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item8)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item8.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item8,0,100),"",(null==e.item8?null:e.item8.length)>100?"...":""," ")}}function k(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item9)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item9.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item9,0,100),"",(null==e.item9?null:e.item9.length)>100?"...":""," ")}}function w(e,t){if(1&e){const e=n.Qb();n.Pb(0,"td",40),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).verMas(t.item10)}),n.mc(1),n.Zb(2,"slice"),n.Ob()}if(2&e){const e=n.Yb().$implicit;n.Cb("pointer",e.item10.length>100),n.zb(1),n.pc(" ",n.cc(2,4,e.item10,0,100),"",(null==e.item10?null:e.item10.length)>100?"...":""," ")}}function C(e,t){if(1&e){const e=n.Qb();n.Pb(0,"a",34),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).addPayment(t.id)}),n.Lb(1,"i",42),n.Ob()}}function I(e,t){if(1&e){const e=n.Qb();n.Pb(0,"a",34),n.Wb("click",function(){n.gc(e);const t=n.Yb().$implicit;return n.Yb(2).addAsset(t.id)}),n.Lb(1,"i",43),n.Ob()}}function y(e,t){if(1&e){const e=n.Qb();n.Pb(0,"tr"),n.kc(1,m,2,1,"td",30),n.kc(2,f,3,8,"td",31),n.kc(3,p,3,8,"td",31),n.kc(4,g,3,8,"td",31),n.kc(5,h,2,4,"td",32),n.kc(6,v,3,8,"td",31),n.kc(7,P,3,8,"td",31),n.kc(8,O,3,8,"td",31),n.kc(9,k,3,8,"td",31),n.kc(10,w,3,8,"td",31),n.Pb(11,"td",33),n.Pb(12,"a",34),n.Wb("click",function(){n.gc(e);const i=t.$implicit;return n.Yb(2).edit(i.id)}),n.Lb(13,"i",35),n.Ob(),n.Pb(14,"a",34),n.Wb("click",function(){n.gc(e);const i=t.$implicit;return n.Yb(2).delete(i.id)}),n.Lb(15,"i",36),n.Ob(),n.kc(16,C,2,0,"a",37),n.kc(17,I,2,0,"a",37),n.Ob(),n.Ob()}if(2&e){const e=t.$implicit,i=n.Yb(2);n.zb(1),n.dc("ngIf",!i.noImage),n.zb(1),n.dc("ngIf",e.item2),n.zb(1),n.dc("ngIf",e.item3),n.zb(1),n.dc("ngIf",e.item4),n.zb(1),n.dc("ngIf",e.linkVerMas),n.zb(1),n.dc("ngIf",e.item6),n.zb(1),n.dc("ngIf",e.item7),n.zb(1),n.dc("ngIf",e.item8),n.zb(1),n.dc("ngIf",e.item9),n.zb(1),n.dc("ngIf",e.item10),n.zb(6),n.dc("ngIf",i.addPayments),n.zb(1),n.dc("ngIf",i.addAssets)}}function L(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",14),n.Pb(1,"div",2),n.Pb(2,"div",3),n.Pb(3,"div",4),n.Pb(4,"div",15),n.Pb(5,"div",16),n.Pb(6,"h4",17),n.mc(7),n.Ob(),n.kc(8,l,4,4,"ng-container",18),n.kc(9,b,3,5,"ng-template",null,19,n.lc),n.Ob(),n.Pb(11,"div",20),n.Pb(12,"button",21),n.Wb("click",function(){return n.gc(e),n.Yb().create()}),n.mc(13),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",22),n.Pb(15,"table",23),n.Pb(16,"thead"),n.Pb(17,"tr"),n.kc(18,d,2,0,"th",24),n.kc(19,u,2,1,"th",25),n.Pb(20,"th",26),n.mc(21,"Acciones"),n.Ob(),n.Ob(),n.Ob(),n.Pb(22,"tbody"),n.kc(23,y,18,12,"tr",27),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.fc(10),t=n.Yb();n.zb(7),n.nc(t.title),n.zb(1),n.dc("ngIf",!t.searching)("ngIfElse",e),n.zb(5),n.oc(" Crear ",t.title," "),n.zb(5),n.dc("ngIf",!t.noImage),n.zb(1),n.dc("ngForOf",t.encabezadosTabla),n.zb(4),n.dc("ngForOf",t.filasTabla)}}let Y=(()=>{class e{constructor(){this.onCreate=new n.n,this.onEdit=new n.n,this.onDelete=new n.n,this.onRecargar=new n.n,this.onAddPayments=new n.n,this.onAddAssets=new n.n,this.title="",this.totalSection=0,this.encabezadosTabla=[],this.filasTabla=[],this.loading=!0,this.noImage=!1,this.addAssets=!1,this.addPayments=!1,this.searching=!1,this.searchingResults=0}expandirImagen(e){r.a.fire({imageUrl:e,imageWidth:400,imageHeight:400,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}verMas(e){e.length>100&&r.a.fire({text:e,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}create(){this.onCreate.emit()}edit(e){this.onEdit.emit(e)}delete(e){this.onDelete.emit(e)}addPayment(e){this.onAddPayments.emit(e)}addAsset(e){this.onAddAssets.emit(e)}search(e){if(this.searching=!0,!e)return this.onRecargar.emit(!0),void(this.searching=!1);this.filasTabla=this.filasTabla.filter(t=>{var i,n,a,r,o,c,s,l;return(null===(i=t.item2)||void 0===i?void 0:i.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(n=t.item3)||void 0===n?void 0:n.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(a=t.item4)||void 0===a?void 0:a.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(r=t.item6)||void 0===r?void 0:r.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(o=t.item7)||void 0===o?void 0:o.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(c=t.item8)||void 0===c?void 0:c.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(s=t.item9)||void 0===s?void 0:s.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))||(null===(l=t.item10)||void 0===l?void 0:l.toLocaleLowerCase().trim().includes(e.toLocaleLowerCase().trim()))}),this.searchingResults=this.filasTabla.length}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Eb({type:e,selectors:[["app-table"]],inputs:{title:"title",totalSection:"totalSection",encabezadosTabla:"encabezadosTabla",filasTabla:"filasTabla",loading:"loading",noImage:"noImage",addAssets:"addAssets",addPayments:"addPayments"},outputs:{onCreate:"onCreate",onEdit:"onEdit",onDelete:"onDelete",onRecargar:"onRecargar",onAddPayments:"onAddPayments",onAddAssets:"onAddAssets"},decls:9,vars:2,consts:[[1,"table-main-container"],[1,"row","animated","fadeIn","search-container"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar en la tabla",1,"form-control","primary-dark",3,"keyup"],["searchInput",""],["class","row animated fadeIn loading-container",4,"ngIf"],["class","row animated fadeIn rows-container",4,"ngIf"],[1,"row","animated","fadeIn","loading-container"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2"],[1,"mb-0"],[1,"row","animated","fadeIn","rows-container"],[1,"title-section"],[1,"title-section-info"],[1,"card-title","primary-dark"],[4,"ngIf","ngIfElse"],["searchingTemplate",""],[1,"title-section-actions"],[1,"btn","bgc-primary-dark","text-white",3,"click"],[1,"table-responsive"],[1,"table","table-bordered"],["class","text-nowrap primary-dark w100",4,"ngIf"],["class","primary-dark",4,"ngFor","ngForOf"],[1,"text-nowrap","primary-dark","w100"],[4,"ngFor","ngForOf"],[1,"card-subtitle","primary-dark"],[1,"primary-dark"],["class","text-center",4,"ngIf"],["class","primary-dark",3,"pointer","click",4,"ngIf"],["class","primary-dark",3,"pointer","routerLink",4,"ngIf"],[1,"text-nowrap","text-center","actions"],[1,"pointer",3,"click"],[1,"fa","fa-pencil","text-danger","primary-dark"],[1,"fa","fa-close","text-danger","primary-dark"],["class","pointer",3,"click",4,"ngIf"],[1,"text-center"],["alt","Avatar",1,"avatar","pointer",3,"src","click"],[1,"primary-dark",3,"click"],[1,"primary-dark",3,"routerLink"],[1,"ti","ti-money","text-danger","primary-dark"],[1,"ti","ti-image","text-danger","primary-dark"]],template:function(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"div",2),n.Pb(3,"div",3),n.Pb(4,"div",4),n.Pb(5,"input",5,6),n.Wb("keyup",function(){n.gc(e);const i=n.fc(6);return t.search(i.value)}),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.kc(7,s,10,0,"div",7),n.kc(8,L,24,7,"div",8),n.Ob()}2&e&&(n.zb(7),n.dc("ngIf",t.loading),n.zb(1),n.dc("ngIf",!t.loading))},directives:[o.l,o.k,c.d],pipes:[o.j,o.o],styles:[".table-main-container[_ngcontent-%COMP%]   .rows-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.table-main-container[_ngcontent-%COMP%]   .w100[_ngcontent-%COMP%]{width:100px}.table-main-container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:50px;height:50px}.table-main-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),e})()},T9Ob:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("tk/3"),a=i("AytR"),r=i("7hDB"),o=i("fXoL");let c=(()=>{class e{constructor(e){this.http=e,this.headers=new n.c({"access-token":Object(r.a)()})}create(e,t){return console.log(e),this.http.post(`${a.a.API_BASE_URL}/${t}/create`,e,{headers:this.headers})}edit(e,t,i){return this.http.patch(`${a.a.API_BASE_URL}/${i}/edit/${e}`,t,{headers:this.headers})}editUserRole(e,t){return this.http.patch(`${a.a.API_BASE_URL}/users/role/${e}`,t,{headers:this.headers})}delete(e,t){return this.http.delete(`${a.a.API_BASE_URL}/${t}/delete/${e}`,{headers:this.headers})}}return e.\u0275fac=function(t){return new(t||e)(o.Tb(n.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},cH24:function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",function(){return I});var n=i("ofXK"),a=i("tyNb"),r=i("XNiG"),o=i("nYR2"),c=i("1G5W"),s=i("PSD3"),l=i.n(s),b=i("AytR"),d=i("3Pt+"),u=i("fXoL"),m=i("3T3M"),f=i("T9Ob"),p=i("IT5Z"),g=i("FQRV");function h(e,t){if(1&e){const e=u.Qb();u.Pb(0,"app-table",6),u.Wb("onRecargar",function(t){return u.gc(e),u.Yb(2).recargarUsuarios(t)})("onCreate",function(){return u.gc(e),u.Yb(2).crearUsuario()})("onEdit",function(t){return u.gc(e),u.Yb(2).changeRole(t)})("onDelete",function(t){return u.gc(e),u.Yb(2).borrarUSuario(t)}),u.Ob()}if(2&e){const e=u.Yb(2);u.dc("encabezadosTabla",e.encabezadosTabla)("filasTabla",e.tableData)("totalSection",null==e.users?null:e.users.length)("loading",e.loading)}}function v(e,t){if(1&e&&(u.Pb(0,"div",2),u.Pb(1,"div",3),u.Pb(2,"div",4),u.kc(3,h,1,4,"app-table",5),u.Ob(),u.Ob(),u.Ob()),2&e){const e=u.Yb();u.zb(3),u.dc("ngIf",e.users&&e.tableData&&!e.isEditingRole)}}function P(e,t){1&e&&(u.Pb(0,"span",19),u.mc(1,"Este dato es requerido"),u.Ob())}function O(e,t){if(1&e){const e=u.Qb();u.Pb(0,"div",2),u.Pb(1,"div",3),u.Pb(2,"div",7),u.Pb(3,"h1",8),u.mc(4,"Editar usuario"),u.Ob(),u.Ob(),u.Pb(5,"form",9),u.Wb("ngSubmit",function(){return u.gc(e),u.Yb().formSubmit()}),u.Pb(6,"div",4),u.Pb(7,"div",10),u.Pb(8,"label"),u.mc(9,"Rol del usuario*"),u.Ob(),u.Pb(10,"select",11),u.Pb(11,"option",12),u.mc(12,"Usuario com\xfan"),u.Ob(),u.Pb(13,"option",13),u.mc(14,"Usuario adminitrativo"),u.Ob(),u.Ob(),u.Pb(15,"div",14),u.kc(16,P,2,0,"span",15),u.Ob(),u.Ob(),u.Ob(),u.Pb(17,"div",16),u.Pb(18,"button",17),u.mc(19," Confirmar "),u.Ob(),u.Pb(20,"button",18),u.Wb("click",function(){return u.gc(e),u.Yb().recargarUsuarios(!0)}),u.mc(21," Volver "),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob()}if(2&e){const e=u.Yb();u.zb(5),u.dc("formGroup",e.editRoleForm),u.zb(11),u.dc("ngIf",(null==e.editRoleForm.controls.role.errors?null:e.editRoleForm.controls.role.errors.required)&&e.editRoleForm.controls.role.touched)}}const k=[{path:"",component:(()=>{class e{constructor(e,t,i,n,a){this.usersService=e,this.router=t,this.adminPanelCrudService=i,this.fb=n,this.authService=a,this.someClass=!0,this.users=[],this.tableData=[],this.encabezadosTabla=["Nombre","Email","Tel\xe9fono","Rol"],this.loading=!0,this.isEditingRole=!1,this.destroy$=new r.a,this.createForm()}get activeUserRole(){return this.authService.getUser().role}createForm(){this.editRoleForm=this.fb.group({role:["",d.m.required]})}ngOnInit(){this.loadUsers()}formSubmit(){this.editRoleForm.valid?this.changeRoleEnLaDb():this.editRoleForm.markAllAsTouched()}loadUsers(){this.loading=!0,this.usersService.getAllUsers().pipe(Object(o.a)(()=>this.loading=!1)).subscribe(e=>{this.setUsers(e),this.mapUsersForTable()})}setUsers(e){var t;this.users=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.map(e=>({id:e.id,apellido:e.last_name,email:e.email,nombre:e.first_name,dni:e.dni,role:e.role,phone:e.phone,avatar:e.avatar,project:e.Projects,getAvatar:()=>{let t="";return t=e.avatar?`${b.a.API_IMAGE_URL}/users/${e.avatar}`:"assets/no-image.png",t}}))}mapUsersForTable(){this.tableData=this.users.map(e=>({imagen:e.getAvatar(),item2:`${e.nombre} ${e.apellido}`,item3:e.email?e.email:"Vac\xedo",item4:e.phone?e.phone:"Vac\xedo",item6:e.role?e.role:"Vac\xedo",id:e.id}))}recargarUsuarios(e){e&&(this.tableData=[],this.isEditingRole=!1,this.loadUsers())}crearUsuario(){this.router.navigateByUrl("/main/auth/register")}changeRole(e){if(this.verificarNiverDeUsuario()){const t=this.users.find(t=>t.id===e);if(t){if("master"===t.role)return void l.a.fire("Prohibido","El rol de este usuario no se puede editar","warning");this.isEditingRole=!0,this.userID=t.id,this.editRoleForm.controls.role.setValue(t.role)}}}changeRoleEnLaDb(){this.adminPanelCrudService.editUserRole(this.userID,this.editRoleForm.value).pipe(Object(c.a)(this.destroy$)).subscribe(e=>{var t;this.recargarUsuarios(!0),this.alertFailureOrSuccess(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.status)},()=>l.a.fire("\xa1Lo sentimos!","Error inesperado, recargar p\xe1gina. Si el problema persiste llamar al administrador o a su proveedor de internet","error"))}borrarUSuario(e){if(this.verificarNiverDeUsuario()){const t=this.users.find(t=>t.id===e);if(t){if("master"===(null==t?void 0:t.role))return void l.a.fire("\xa1Prohibido!","\xa1Este usuario no se puede borrar!","warning");l.a.fire({title:"\xbfEstas seguro?",text:`Estas a punto de borrar al usuario: ${null==t?void 0:t.nombre} ${null==t?void 0:t.apellido}`,icon:"question",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&this.borrarUsuarioDeLaDb(t)})}}}borrarUsuarioDeLaDb(e){this.adminPanelCrudService.delete(null==e?void 0:e.id,"users").pipe(Object(c.a)(this.destroy$)).subscribe(()=>this.showConfirmationOfDelete(`${null==e?void 0:e.nombre} ${null==e?void 0:e.apellido}`),()=>l.a.fire("Error","Tuvimos un problema, por favor intent\xe1 nuevamente. Si el problema persiste ponete en contacto con tu proveedor de internet","error"))}verificarNiverDeUsuario(){return"master"===this.activeUserRole||(l.a.fire("No permitido","No ten\xe9s los permisos para realizar esa acci\xf3n. Comunicate con el due\xf1o de la p\xe1gina","warning"),!1)}showConfirmationOfDelete(e){l.a.fire({title:"Eliminado",text:`El usuario ${e} fue eliminado con \xe9xito`,icon:"success",confirmButtonText:"OK"}).then(e=>{e.isConfirmed&&this.recargarUsuarios(!0)})}alertFailureOrSuccess(e){200===e||201===e?l.a.fire("\xa1Excelente!","El usuario se edit\xf3 correctamente","success"):l.a.fire("Error","No pudimos editar el usuario, por favor intent\xe1 de nuevo recargando la p\xe1gina","error")}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(u.Kb(m.a),u.Kb(a.c),u.Kb(f.a),u.Kb(d.c),u.Kb(p.a))},e.\u0275cmp=u.Eb({type:e,selectors:[["app-users"]],hostVars:2,hostBindings:function(e,t){2&e&&u.Cb("admin-panel-container",t.someClass)},decls:3,vars:2,consts:[[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"card"],[1,"card-body"],["title","Usuarios",3,"encabezadosTabla","filasTabla","totalSection","loading","onRecargar","onCreate","onEdit","onDelete",4,"ngIf"],["title","Usuarios",3,"encabezadosTabla","filasTabla","totalSection","loading","onRecargar","onCreate","onEdit","onDelete"],[1,"card-header"],[1,"primary-dark"],[1,"form","p-t-20","form-material",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","role",1,"form-control","custom-select"],["value","user"],["value","admin"],[1,"p-2"],["class","text-danger",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10","bgc-primary-dark"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","m-r-10",3,"click"],[1,"text-danger"]],template:function(e,t){1&e&&(u.Pb(0,"div",0),u.kc(1,v,4,1,"div",1),u.kc(2,O,22,2,"div",1),u.Ob()),2&e&&(u.zb(1),u.dc("ngIf",!t.isEditingRole),u.zb(1),u.dc("ngIf",t.isEditingRole))},directives:[n.l,g.a,d.n,d.h,d.e,d.l,d.g,d.d,d.i,d.o],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Ib({type:e}),e.\u0275inj=u.Hb({imports:[[a.f.forChild(k)],a.f]}),e})();var C=i("6eV/");let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Ib({type:e}),e.\u0275inj=u.Hb({imports:[[n.b,w,d.f,C.a,d.k]]}),e})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0st6":function(e,r,o){"use strict";o.r(r),o.d(r,"UserProfileModule",function(){return x});var t=o("ofXK"),n=o("tyNb"),i=o("Tj/N"),a=o("3Pt+"),l=o("XNiG"),s=o("1G5W"),c=o("PSD3"),d=o.n(c),b=o("fXoL"),m=o("IT5Z");function u(e,r){1&e&&(b.Ob(0,"div",35),b.Ob(1,"span",45),b.jc(2,"Formato de im\xe1gen inv\xe1lido"),b.Nb(),b.Nb())}function p(e,r){1&e&&(b.Ob(0,"li",46),b.Ob(1,"a",47),b.jc(2,"Administrar p\xe1gina"),b.Nb(),b.Nb())}function f(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Este dato es requerido"),b.Nb())}function h(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Debe tener al menos 3 caracteres"),b.Nb())}function v(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Este dato es requerido"),b.Nb())}function g(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Debe tener al menos 3 caracteres"),b.Nb())}function N(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Este dato es requerido"),b.Nb())}function O(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Debe contenter al menos 7 caracteres"),b.Nb())}function P(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"N\xfamero m\xe1ximo 999.999.999"),b.Nb())}function F(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Este dato es requerido"),b.Nb())}function y(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Por favor ingres\xe1 un email v\xe1lido"),b.Nb())}function w(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"La contrase\xf1a debe tener un m\xednimo de 8 caracteres, incluyendo una min\xfascula, una may\xfascula, un n\xfamero y un s\xedmbolo"),b.Nb())}function j(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Este dato es requerido"),b.Nb())}function z(e,r){1&e&&(b.Ob(0,"span",45),b.jc(1,"Las contrase\xf1as no coinciden"),b.Nb())}function _(e,r){if(1&e&&(b.Ob(0,"div",48),b.Ob(1,"div",33),b.Kb(2,"input",49),b.Ob(3,"div",35),b.hc(4,j,2,0,"span",36),b.hc(5,z,2,0,"span",36),b.Nb(),b.Nb(),b.Nb()),2&e){const e=b.Xb();b.zb(4),b.bc("ngIf",(null==e.editProfileForm.controls.passwordRepeat.errors?null:e.editProfileForm.controls.passwordRepeat.errors.required)&&e.editProfileForm.controls.passwordRepeat.touched),b.zb(1),b.bc("ngIf",(null==e.editProfileForm.controls.passwordRepeat.errors?null:e.editProfileForm.controls.passwordRepeat.errors.notMatch)&&e.editProfileForm.controls.passwordRepeat.touched)}}const k=[{path:"",component:(()=>{class e{constructor(e,r){var o,t,n,i,s;this.authService=e,this.fb=r,this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.editProfileForm=this.fb.group({first_name:[null===(o=this.user)||void 0===o?void 0:o.nombre,[a.k.required,a.k.minLength(3)]],last_name:[null===(t=this.user)||void 0===t?void 0:t.apellido,[a.k.required,a.k.minLength(3)]],dni:[null===(n=this.user)||void 0===n?void 0:n.dni,[a.k.required,a.k.max(999999999),a.k.min(1e6)]],email:[null===(i=this.user)||void 0===i?void 0:i.email,[a.k.required,a.k.pattern(this.emailPattern)]],phone:[null===(s=this.user)||void 0===s?void 0:s.phone],password:["",[]],passwordRepeat:["",[a.k.required]]},{validator:this.passwordMatchFormValidator("password","passwordRepeat")}),this.mostrarRepetirContrasena=!1,this.formatoImagenNoAceptado=!1,this.destroy$=new l.a}get user(){return this.authService.getUser()}cambiarFoto(e){const r=e.target.files[0],o=new FormData;if(o.append("avatar",r),o.get("avatar"))switch(r.type){case"image/jpg":case"image/png":case"image/jpeg":return this.formatoImagenNoAceptado=!1,void this.actualizarImagenEnDB(o);default:this.formatoImagenNoAceptado=!0}}actualizarImagenEnDB(e){this.authService.actualizarImagenUsuario(e).pipe(Object(s.a)(this.destroy$)).subscribe(e=>{console.log(e),200===e.meta.status?this.modifyLoggedUser(null==e?void 0:e.data):d.a.fire("\xa1Lo sentimos!","No podemos actualizar tu informaci\xf3n por favor ponete en contacto con el administrador de la p\xe1gina","error")},e=>{d.a.fire("\xa1Lo sentimos!","No pudimos actualizar tu perfil como quer\xedamos, por favor intentalo nuevamente","error")})}cambiarPerfil(){this.editProfileForm.markAllAsTouched(),this.editProfileForm.valid&&(this.editProfileForm.controls.password.value?this.confirmAndModifyLoggedUser():this.guardarCambiosEnBaseDeDatos())}guardarCambiosEnBaseDeDatos(){this.authService.actualizarUsuario(this.editProfileForm.value).pipe(Object(s.a)(this.destroy$)).subscribe(e=>{var r;200===(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.status)?this.modifyLoggedUser(null==e?void 0:e.data):d.a.fire("\xa1Lo sentimos!","No podemos actualizar tu informaci\xf3n por favor ponete en contacto con el administrador de la p\xe1gina","warning")},()=>{d.a.fire("\xa1Lo sentimos!","No pudimos actualizar tu perfil como quer\xedamos, por favor intentalo nuevamente","error")})}confirmAndModifyLoggedUser(){d.a.fire({title:"\xbfEst\xe1s seguro que quer\xe9s cambiar tu contrase\xf1a?",showDenyButton:!0,confirmButtonText:"Si, continuar",denyButtonText:"No"}).then(e=>{e.isConfirmed&&this.guardarCambiosEnBaseDeDatos()}).catch(e=>d.a.fire("\xa1Lo sentimos!","No pudimos actualizar tu perfil como quer\xedamos, por favor intentalo nuevamente","error"))}modifyLoggedUser(e){const r=new i.a(null==e?void 0:e.first_name,null==e?void 0:e.last_name,null==e?void 0:e.email,null==e?void 0:e.role,null==e?void 0:e.dni,null==e?void 0:e.avatar,null==e?void 0:e.phone);this.authService.setUser(r),d.a.fire("\xa1Excelente!","Actualizamos tus datos sin problemas","success")}toggleRepetirConstrasena(){this.mostrarRepetirContrasena=!!this.editProfileForm.controls.password.value}passwordMatchFormValidator(e,r){return o=>{const t=o.get(e),n=o.get(r);n.setErrors(t.value===n.value?null:{notMatch:!0})}}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(b.Jb(m.a),b.Jb(a.c))},e.\u0275cmp=b.Db({type:e,selectors:[["app-user-profile"]],decls:107,vars:25,consts:[[1,"row","animate__animated","animate__fadeIn","animate__slow"],[1,"col-lg-4","col-xlg-3","col-md-5"],[1,"card"],[1,"card-body"],[1,"m-t-30","text-center"],["width","150",1,"img-circle","pointer",3,"src","click"],["class","p-2",4,"ngIf"],["type","file",1,"d-none",3,"change"],["inputFoto",""],[1,"card-title","m-t-10","primary-dark"],[1,"text-muted"],[1,"text-muted","p-t-30","db",3,"hidden"],[3,"hidden"],[1,"col-lg-8","col-xlg-9","col-md-7"],["role","tablist",1,"nav","nav-tabs","profile-tab"],[1,"nav-item"],["data-toggle","tab","href","#profile","role","tab","aria-expanded","true",1,"nav-link","active"],["data-toggle","tab","href","#settings","role","tab","aria-expanded","false",1,"nav-link"],["class","nav-item bgc-primary",4,"ngIf"],[1,"tab-content"],["id","profile","role","tabpanel","aria-expanded","true",1,"tab-pane","active"],[1,"row"],[1,"col-md-4","col-xs-6","b-r"],[1,"col-md-4","col-xs-6"],[1,"font-medium","m-t-30"],[1,"m-t-30"],[1,"pull-right"],[1,"progress"],["role","progressbar","aria-valuenow","80","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",2,"width","80%","height","6px"],[1,"sr-only"],["id","settings","role","tabpanel","aria-expanded","false",1,"tab-pane"],[1,"form-horizontal","form-material",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"col-md-12"],["type","text","formControlName","first_name","placeholder","Nombre",1,"form-control","form-control-line","primary-dark"],[1,"p-2"],["class","text-danger",4,"ngIf"],["type","text","formControlName","last_name","placeholder","Apellido",1,"form-control","form-control-line","primary-dark"],["type","text","formControlName","dni","placeholder","DNI",1,"form-control","form-control-line","primary-dark"],["type","email","formControlName","email","placeholder","Email","name","example-email","id","example-email",1,"form-control","form-control-line","primary-dark"],["type","number","placeholder","Tel\xe9fono","formControlName","phone",1,"form-control","form-control-line","primary-dark"],["type","password","placeholder","Escrib\xed tu contrase\xf1a nueva","formControlName","password",1,"form-control","form-control-line","primary-dark",3,"change"],["class","\n                  form-group\n                  animate__animated animate__slideInLeft animate__fast\n                ",4,"ngIf"],[1,"col-sm-12"],["type","submit",1,"btn","btn-success"],[1,"text-danger"],[1,"nav-item","bgc-primary"],["id","admin-pag","routerLink","/admin","aria-expanded","false",1,"nav-link"],[1,"form-group","animate__animated","animate__slideInLeft","animate__fast"],["type","password","placeholder","Repet\xed tu contrase\xf1a nueva","formControlName","passwordRepeat",1,"form-control","form-control-line","primary-dark"]],template:function(e,r){if(1&e){const e=b.Pb();b.Ob(0,"div",0),b.Ob(1,"div",1),b.Ob(2,"div",2),b.Ob(3,"div",3),b.Ob(4,"div",4),b.Ob(5,"img",5),b.Vb("click",function(){return b.ec(e),b.dc(8).click()}),b.Nb(),b.hc(6,u,3,0,"div",6),b.Ob(7,"input",7,8),b.Vb("change",function(e){return r.cambiarFoto(e)}),b.Nb(),b.Ob(9,"h4",9),b.jc(10),b.Nb(),b.Nb(),b.Nb(),b.Ob(11,"div"),b.Kb(12,"hr"),b.Nb(),b.Ob(13,"div",3),b.Ob(14,"h4",10),b.jc(15,"Email"),b.Nb(),b.Ob(16,"h6"),b.jc(17),b.Nb(),b.Ob(18,"h4",11),b.jc(19,"Tel\xe9fono"),b.Nb(),b.Ob(20,"h6",12),b.jc(21),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(22,"div",13),b.Ob(23,"div",2),b.Ob(24,"ul",14),b.Ob(25,"li",15),b.Ob(26,"a",16),b.jc(27,"Yo"),b.Nb(),b.Nb(),b.Ob(28,"li",15),b.Ob(29,"a",17),b.jc(30,"Editar perfil"),b.Nb(),b.Nb(),b.hc(31,p,3,0,"li",18),b.Nb(),b.Ob(32,"div",19),b.Ob(33,"div",20),b.Ob(34,"div",3),b.Ob(35,"div",21),b.Ob(36,"div",22),b.Ob(37,"strong"),b.jc(38,"Nombre completo"),b.Nb(),b.Kb(39,"br"),b.Ob(40,"p",10),b.jc(41),b.Nb(),b.Nb(),b.Ob(42,"div",22),b.Ob(43,"strong"),b.jc(44,"Tel\xe9fono"),b.Nb(),b.Kb(45,"br"),b.Ob(46,"p",10),b.jc(47),b.Nb(),b.Nb(),b.Ob(48,"div",23),b.Ob(49,"strong"),b.jc(50,"Email"),b.Nb(),b.Kb(51,"br"),b.Ob(52,"p",10),b.jc(53),b.Nb(),b.Nb(),b.Nb(),b.Kb(54,"hr"),b.Ob(55,"h4",24),b.jc(56,"Proyecto:"),b.Nb(),b.Kb(57,"hr"),b.Ob(58,"h5",25),b.jc(59," Wordpress "),b.Ob(60,"span",26),b.jc(61,"80%"),b.Nb(),b.Nb(),b.Ob(62,"div",27),b.Ob(63,"div",28),b.Ob(64,"span",29),b.jc(65,"50% Complete"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(66,"div",30),b.Ob(67,"div",3),b.Ob(68,"form",31),b.Vb("ngSubmit",function(){return r.cambiarPerfil()}),b.Ob(69,"div",32),b.Ob(70,"div",33),b.Kb(71,"input",34),b.Ob(72,"div",35),b.hc(73,f,2,0,"span",36),b.hc(74,h,2,0,"span",36),b.Nb(),b.Nb(),b.Nb(),b.Ob(75,"div",32),b.Ob(76,"div",33),b.Kb(77,"input",37),b.Nb(),b.Ob(78,"div",35),b.hc(79,v,2,0,"span",36),b.hc(80,g,2,0,"span",36),b.Nb(),b.Nb(),b.Ob(81,"div",32),b.Ob(82,"div",33),b.Kb(83,"input",38),b.Ob(84,"div",35),b.hc(85,N,2,0,"span",36),b.hc(86,O,2,0,"span",36),b.hc(87,P,2,0,"span",36),b.Nb(),b.Nb(),b.Nb(),b.Ob(88,"div",32),b.Ob(89,"div",33),b.Kb(90,"input",39),b.Ob(91,"div",35),b.hc(92,F,2,0,"span",36),b.hc(93,y,2,0,"span",36),b.Nb(),b.Nb(),b.Nb(),b.Ob(94,"div",32),b.Ob(95,"div",33),b.Kb(96,"input",40),b.Kb(97,"div",35),b.Nb(),b.Nb(),b.Ob(98,"div",32),b.Ob(99,"div",33),b.Ob(100,"input",41),b.Vb("change",function(){return r.toggleRepetirConstrasena()}),b.Nb(),b.hc(101,w,2,0,"span",36),b.Nb(),b.Nb(),b.hc(102,_,6,2,"div",42),b.Ob(103,"div",32),b.Ob(104,"div",43),b.Ob(105,"button",44),b.jc(106," Actualizar perfil "),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()}2&e&&(b.zb(5),b.bc("src",r.user.getAvatar(),b.fc),b.zb(1),b.bc("ngIf",r.formatoImagenNoAceptado),b.zb(4),b.mc(" ",null==r.user?null:r.user.nombre," ",r.user.apellido," "),b.zb(7),b.kc(null==r.user?null:r.user.email),b.zb(1),b.bc("hidden",!(null!=r.user&&r.user.phone)),b.zb(2),b.bc("hidden",!(null!=r.user&&r.user.phone)),b.zb(1),b.kc(null==r.user?null:r.user.phone),b.zb(10),b.bc("ngIf","admin"===(null==r.user?null:r.user.role)||"master"===(null==r.user?null:r.user.role)),b.zb(10),b.mc(" ",null==r.user?null:r.user.nombre," ",null==r.user?null:r.user.apellido," "),b.zb(6),b.kc(null==r.user?null:r.user.phone),b.zb(6),b.kc(null==r.user?null:r.user.email),b.zb(15),b.bc("formGroup",r.editProfileForm),b.zb(5),b.bc("ngIf",(null==r.editProfileForm.controls.first_name.errors?null:r.editProfileForm.controls.first_name.errors.required)&&r.editProfileForm.controls.first_name.touched),b.zb(1),b.bc("ngIf",(null==r.editProfileForm.controls.first_name.errors?null:r.editProfileForm.controls.first_name.errors.minlength)&&r.editProfileForm.controls.first_name.touched),b.zb(5),b.bc("ngIf",(null==r.editProfileForm.controls.last_name.errors?null:r.editProfileForm.controls.last_name.errors.required)&&r.editProfileForm.controls.last_name.touched),b.zb(1),b.bc("ngIf",(null==r.editProfileForm.controls.last_name.errors?null:r.editProfileForm.controls.last_name.errors.minlength)&&r.editProfileForm.controls.last_name.touched),b.zb(5),b.bc("ngIf",(null==r.editProfileForm.controls.dni.errors?null:r.editProfileForm.controls.dni.errors.required)&&r.editProfileForm.controls.dni.touched),b.zb(1),b.bc("ngIf",(null==r.editProfileForm.controls.dni.errors?null:r.editProfileForm.controls.dni.errors.min)&&r.editProfileForm.controls.dni.touched),b.zb(1),b.bc("ngIf",(null==r.editProfileForm.controls.dni.errors?null:r.editProfileForm.controls.dni.errors.max)&&r.editProfileForm.controls.dni.touched),b.zb(5),b.bc("ngIf",(null==r.editProfileForm.controls.email.errors?null:r.editProfileForm.controls.email.errors.required)&&r.editProfileForm.controls.email.touched),b.zb(1),b.bc("ngIf",(null==r.editProfileForm.controls.email.errors?null:r.editProfileForm.controls.email.errors.pattern)&&r.editProfileForm.controls.email.touched),b.zb(8),b.bc("ngIf",(null==r.editProfileForm.controls.password.errors?null:r.editProfileForm.controls.password.errors.pattern)&&r.editProfileForm.controls.password.touched),b.zb(1),b.bc("ngIf",r.mostrarRepetirContrasena))},directives:[t.j,a.l,a.h,a.e,a.b,a.g,a.d,a.i,n.e],styles:["#admin-pag[_ngcontent-%COMP%]{color:#fff}"]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[n.f.forChild(k)],n.f]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[t.b,I,n.f,a.j]]}),e})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Zg4R:function(e,r,o){"use strict";o.r(r),o.d(r,"RegisterModule",function(){return A});var s=o("ofXK"),t=o("tyNb"),n=o("3Pt+"),i=o("XNiG"),a=o("1G5W"),l=o("ZLyn"),c=o("fXoL"),d=o("IT5Z"),u=o("R3Qk");function m(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function b(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Debe tener al menos 3 caracteres"),c.Ob())}function p(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function g(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Debe tener al menos 3 caracteres"),c.Ob())}function f(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function h(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Debe contenter al menos 7 caracteres"),c.Ob())}function v(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"N\xfamero m\xe1ximo 999.999.999"),c.Ob())}function P(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function w(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Por favor ingres\xe1 un email v\xe1lido"),c.Ob())}function O(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function F(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"La contrase\xf1a debe tener un m\xednimo de 8 caracteres, incluyendo una min\xfascula, una may\xfascula, un n\xfamero y un s\xedmbolo"),c.Ob())}function y(e,r){1&e&&(c.Pb(0,"li"),c.mc(1," La contrase\xf1a debe tener al menos 8 caracteres "),c.Ob())}function I(e,r){1&e&&(c.Pb(0,"li"),c.mc(1," La contrase\xf1a debe contener al menos un n\xfamero "),c.Ob())}function k(e,r){1&e&&(c.Pb(0,"li"),c.mc(1," La contrase\xf1a debe contener al menos una letra min\xfascula "),c.Ob())}function S(e,r){1&e&&(c.Pb(0,"li"),c.mc(1," La contrase\xf1a debe tener al menos una letra may\xfascula "),c.Ob())}function z(e,r){1&e&&(c.Pb(0,"li"),c.mc(1," La contrase\xf1a debe tener al menos alguno de los siguientes s\xedmbolos *._%+- "),c.Ob())}function E(e,r){if(1&e&&(c.Pb(0,"div",13),c.Pb(1,"ul",30),c.kc(2,y,2,0,"li",31),c.kc(3,I,2,0,"li",31),c.kc(4,k,2,0,"li",31),c.kc(5,S,2,0,"li",31),c.kc(6,z,2,0,"li",31),c.Ob(),c.Ob()),2&e){const e=c.Yb(2);c.zb(2),c.dc("ngIf",e.showStrongPasswordErrorMsgs()),c.zb(1),c.dc("ngIf",e.showStrongPasswordErrorMsgs()),c.zb(1),c.dc("ngIf",e.showStrongPasswordErrorMsgs()),c.zb(1),c.dc("ngIf",e.showStrongPasswordErrorMsgs()),c.zb(1),c.dc("ngIf",e.showStrongPasswordErrorMsgs())}}function R(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function _(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Las contrase\xf1as no coinciden"),c.Ob())}function q(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Este dato es requerido"),c.Ob())}function x(e,r){if(1&e&&(c.Pb(0,"div",10),c.Pb(1,"label",32),c.mc(2,"Rol del usuario*"),c.Ob(),c.Pb(3,"select",33),c.Pb(4,"option",34),c.mc(5,"--Seleccionar el rol del usuario--"),c.Ob(),c.Pb(6,"option",34),c.mc(7,"Admin"),c.Ob(),c.Pb(8,"option",34),c.mc(9,"Usuario final"),c.Ob(),c.Ob(),c.Pb(10,"div",13),c.kc(11,q,2,0,"span",14),c.Ob(),c.Ob()),2&e){const e=c.Yb(2);c.zb(4),c.dc("value","no"),c.zb(2),c.dc("value","admin"),c.zb(2),c.dc("value","user"),c.zb(3),c.dc("ngIf",null==e.registerForm.controls.role.errors?null:e.registerForm.controls.role.errors.notValue)}}function C(e,r){1&e&&(c.Pb(0,"span",29),c.mc(1,"Debes aceptar los t\xe9rminos y condiciones antes de empezar"),c.Ob())}function L(e,r){if(1&e&&(c.Pb(0,"div",10),c.Pb(1,"div",35),c.Lb(2,"input",36),c.Pb(3,"label",37),c.mc(4," Acepto t\xe9rminos y condiciones* "),c.Ob(),c.Ob(),c.kc(5,C,2,0,"span",14),c.Ob()),2&e){const e=c.Yb(2);c.zb(5),c.dc("ngIf",!e.registerForm.controls.terminosYCondiciones.value&&e.registerForm.controls.terminosYCondiciones.touched)}}function j(e,r){if(1&e){const e=c.Qb();c.Pb(0,"div",2),c.Pb(1,"div",3),c.Pb(2,"div",4),c.Pb(3,"div",5),c.Pb(4,"h2",6),c.mc(5,"Registro"),c.Ob(),c.Pb(6,"span"),c.mc(7," \xbfYa ten\xe9s cuenta? "),c.Pb(8,"a",7),c.mc(9,"Inici\xe1 sesi\xf3n"),c.Ob(),c.Ob(),c.Ob(),c.Pb(10,"form",8),c.Wb("ngSubmit",function(){return c.gc(e),c.Yb().register()}),c.Pb(11,"div",9),c.Pb(12,"div",10),c.Pb(13,"div",11),c.Lb(14,"input",12),c.Pb(15,"div",13),c.kc(16,m,2,0,"span",14),c.kc(17,b,2,0,"span",14),c.Ob(),c.Ob(),c.Ob(),c.Pb(18,"div",10),c.Pb(19,"div",11),c.Lb(20,"input",15),c.Pb(21,"div",13),c.kc(22,p,2,0,"span",14),c.kc(23,g,2,0,"span",14),c.Ob(),c.Ob(),c.Ob(),c.Pb(24,"div",10),c.Pb(25,"div",11),c.Lb(26,"input",16),c.Pb(27,"div",13),c.kc(28,f,2,0,"span",14),c.kc(29,h,2,0,"span",14),c.kc(30,v,2,0,"span",14),c.Ob(),c.Ob(),c.Ob(),c.Pb(31,"div",10),c.Pb(32,"div",11),c.Lb(33,"input",17),c.Pb(34,"div",13),c.kc(35,P,2,0,"span",14),c.kc(36,w,2,0,"span",14),c.Ob(),c.Ob(),c.Ob(),c.Pb(37,"div",10),c.Pb(38,"div",11),c.Lb(39,"input",18,19),c.Pb(41,"div",20),c.Pb(42,"i",21),c.Wb("click",function(){c.gc(e);const r=c.fc(40);return c.Yb().showPassword(r)}),c.Ob(),c.Ob(),c.Pb(43,"div",13),c.kc(44,O,2,0,"span",14),c.kc(45,F,2,0,"span",14),c.Ob(),c.Ob(),c.kc(46,E,7,5,"div",22),c.Ob(),c.Pb(47,"div",10),c.Pb(48,"div",11),c.Lb(49,"input",23,24),c.Pb(51,"div",20),c.Pb(52,"i",21),c.Wb("click",function(){c.gc(e);const r=c.fc(50);return c.Yb().showRepeatPassword(r)}),c.Ob(),c.Ob(),c.Pb(53,"div",13),c.kc(54,R,2,0,"span",14),c.kc(55,_,2,0,"span",14),c.Ob(),c.Ob(),c.Ob(),c.kc(56,x,12,4,"div",25),c.kc(57,L,6,1,"div",25),c.Ob(),c.Pb(58,"div",26),c.Pb(59,"div",27),c.Pb(60,"button",28),c.mc(61," Registrarse "),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()}if(2&e){const e=c.Yb();c.zb(10),c.dc("formGroup",e.registerForm),c.zb(6),c.dc("ngIf",(null==e.registerForm.controls.first_name.errors?null:e.registerForm.controls.first_name.errors.required)&&e.registerForm.controls.first_name.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.first_name.errors?null:e.registerForm.controls.first_name.errors.minlength)&&e.registerForm.controls.first_name.touched),c.zb(5),c.dc("ngIf",(null==e.registerForm.controls.last_name.errors?null:e.registerForm.controls.last_name.errors.required)&&e.registerForm.controls.last_name.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.last_name.errors?null:e.registerForm.controls.last_name.errors.minlength)&&e.registerForm.controls.last_name.touched),c.zb(5),c.dc("ngIf",(null==e.registerForm.controls.dni.errors?null:e.registerForm.controls.dni.errors.required)&&e.registerForm.controls.dni.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.dni.errors?null:e.registerForm.controls.dni.errors.min)&&e.registerForm.controls.dni.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.dni.errors?null:e.registerForm.controls.dni.errors.max)&&e.registerForm.controls.dni.touched),c.zb(5),c.dc("ngIf",(null==e.registerForm.controls.email.errors?null:e.registerForm.controls.email.errors.required)&&e.registerForm.controls.email.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.email.errors?null:e.registerForm.controls.email.errors.pattern)&&e.registerForm.controls.email.touched),c.zb(6),c.Bb(e.passwordEye),c.zb(2),c.dc("ngIf",(null==e.registerForm.controls.password.errors?null:e.registerForm.controls.password.errors.required)&&e.registerForm.controls.password.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.password.errors?null:e.registerForm.controls.password.errors.pattern)&&e.registerForm.controls.password.touched),c.zb(1),c.dc("ngIf",e.showStrongPasswordErrorMsgs()),c.zb(6),c.Bb(e.repeatPasswordEye),c.zb(2),c.dc("ngIf",(null==e.registerForm.controls.passwordRepeat.errors?null:e.registerForm.controls.passwordRepeat.errors.required)&&e.registerForm.controls.passwordRepeat.touched),c.zb(1),c.dc("ngIf",(null==e.registerForm.controls.passwordRepeat.errors?null:e.registerForm.controls.passwordRepeat.errors.notMatch)&&e.registerForm.controls.passwordRepeat.touched),c.zb(1),c.dc("ngIf","master"===(null==e.user?null:e.user.role)),c.zb(1),c.dc("ngIf",!e.user||"master"!==(null==e.user?null:e.user.role))}}function T(e,r){1&e&&(c.Pb(0,"h2",6),c.mc(1,"Validar cuenta"),c.Ob(),c.Lb(2,"hr"),c.Pb(3,"h4",6),c.mc(4,"\xa1Solo queda un paso m\xe1s!"),c.Ob(),c.Pb(5,"p",38),c.mc(6," Revis\xe1 tu casilla de correo electr\xf3nico y hace click en el enlace que te enviamos para validar tu cuenta. Luego de hacer click se abrir\xe1 una nueva ventana donde podr\xe1s continuar con el registro. "),c.Ob(),c.Pb(7,"p",38),c.mc(8," El correo puede tardar unos minutos. Si ves que no llega por favor revisa el Spam. "),c.Ob(),c.Pb(9,"p",38),c.mc(10," Ante cualquier inconveniente podes escribirnos dejandonos un mensaje en el pi\xe9 de p\xe1gina de nuestra web "),c.Ob())}const Y=[{path:"",component:(()=>{class e{constructor(e,r,o,s){this.fb=e,this.authService=r,this.router=o,this.userStore=s,this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.destroy$=new i.a,this.showValidationComponent=!1,this.passwordEye="fa fa-eye-slash",this.userWantsToSeePassword=!1,this.repeatPasswordEye="fa fa-eye-slash",this.userWantsToSeeRepeatPassword=!1,this.setUser(),this.createForm()}ngOnInit(){this.validateTermsAndConditionsAreRequired(),this.validateRoleIsRequired()}setUser(){this.userStore.loggedUser$.pipe(Object(a.a)(this.destroy$)).subscribe(e=>{this.user=e.id?e:void 0})}createForm(){this.registerForm=this.fb.group({first_name:["",[n.m.required,n.m.minLength(3)]],last_name:["",[n.m.required,n.m.minLength(3)]],dni:["",[n.m.required,n.m.max(999999999),n.m.min(1e6)]],email:["",[n.m.required,n.m.pattern(this.emailPattern)]],password:["",n.m.required],passwordRepeat:["",[n.m.required]],terminosYCondiciones:[!1],role:["user"]},{validator:[this.passwordMatchFormValidator,this.validateStrongPassword]})}passwordMatchFormValidator(e){const r=e.get("password"),o=e.get("passwordRepeat");o.setErrors(r.value===o.value?null:{notMatch:!0})}validateStrongPassword(e){const r=e.get("password");/\d/.test(null==r?void 0:r.value)?/[a-z]/.test(null==r?void 0:r.value)?/[A-Z]/.test(null==r?void 0:r.value)?/[*._%+-]/.test(null==r?void 0:r.value)?(null==r?void 0:r.value.length)<8&&(null==r||r.setErrors({minlength:!0})):null==r||r.setErrors({notSymbols:!0}):null==r||r.setErrors({noUppercase:!0}):null==r||r.setErrors({noLowercase:!0}):null==r||r.setErrors({notDigits:!0})}showStrongPasswordErrorMsgs(){var e,r,o,s,t;return this.registerForm.controls.password.touched&&((null===(e=this.registerForm.controls.password.errors)||void 0===e?void 0:e.notDigits)||(null===(r=this.registerForm.controls.password.errors)||void 0===r?void 0:r.noLowercase)||(null===(o=this.registerForm.controls.password.errors)||void 0===o?void 0:o.noUppercase)||(null===(s=this.registerForm.controls.password.errors)||void 0===s?void 0:s.notSymbols)||(null===(t=this.registerForm.controls.password.errors)||void 0===t?void 0:t.minlength))}validateTermsAndConditionsAreRequired(){var e,r,o;(this.user&&"master"!==(null===(e=this.user)||void 0===e?void 0:e.role)&&this.registerForm.controls.terminosYCondiciones||!this.user)&&!(null===(r=this.registerForm.controls.terminosYCondiciones)||void 0===r?void 0:r.value)&&(null===(o=this.registerForm.controls.terminosYCondiciones)||void 0===o||o.setErrors({required:!0}))}validateRoleIsRequired(){const e=this.registerForm.controls.role;null==e||e.valueChanges.pipe(Object(a.a)(this.destroy$)).subscribe(r=>{var o;"master"===(null===(o=this.user)||void 0===o?void 0:o.role)&&"no"===r&&e.setErrors({notValue:!0})})}register(){var e;this.registerForm.markAllAsTouched(),this.registerForm.valid&&("master"===(null===(e=this.user)||void 0===e?void 0:e.role)?this.authService.registerSiendoMaster(this.registerForm.value).pipe(Object(a.a)(this.destroy$)).subscribe({next:e=>this.setRegisterFlow(e),error:e=>Object(l.d)(e)}):this.authService.register(this.registerForm.value).pipe(Object(a.a)(this.destroy$)).subscribe(e=>this.setRegisterFlow(e),e=>Object(l.d)(e)))}setRegisterFlow(e){var r;e.meta.status.toString().includes("20")?"master"===(null===(r=this.user)||void 0===r?void 0:r.role)?Object(l.c)("\xa1Perfecto, CABALLO!","Usuario creado","OK","success").then(e=>e?this.router.navigateByUrl("/admin/dashboard"):null):this.showValidationComponent=!0:Object(l.e)(e)}showPassword(e){this.userWantsToSeePassword=!this.userWantsToSeePassword,this.passwordEye=this.userWantsToSeePassword?"fa fa-eye":"fa fa-eye-slash",e.type=this.userWantsToSeePassword?"text":"password"}showRepeatPassword(e){this.userWantsToSeeRepeatPassword=!this.userWantsToSeeRepeatPassword,this.repeatPasswordEye=this.userWantsToSeeRepeatPassword?"fa fa-eye":"fa fa-eye-slash",e.type=this.userWantsToSeeRepeatPassword?"text":"password"}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(c.Kb(n.c),c.Kb(d.a),c.Kb(t.c),c.Kb(u.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-register"]],decls:3,vars:2,consts:[["class","row animate__animated animate__fadeIn animate__slow",4,"ngIf","ngIfElse"],["registerValidationTemplate",""],[1,"row","animate__animated","animate__fadeIn","animate__slow"],[1,"col-lg-6"],[1,"card"],[1,"card-header"],[1,"primary-dark"],["routerLink","/main/auth/login",1,"pointer","primary-dark"],[1,"form","p-t-20","form-material",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],[1,"input-group"],["type","text","id","exampleInputuname2","placeholder","Nombre*","formControlName","first_name",1,"form-control"],[1,"p-2"],["class","text-danger",4,"ngIf"],["type","text","id","exampleInputuname2","placeholder","Apellido*","formControlName","last_name",1,"form-control"],["type","number","id","exampleInputuname2","placeholder","DNI*","formControlName","dni",1,"form-control"],["type","email","id","exampleInputEmail2","placeholder","juan@tuemail.com*","formControlName","email",1,"form-control"],["type","password","id","exampleInputpwd2","placeholder","Escribir contrase\xf1a*","formControlName","password",1,"form-control"],["inputPassword",""],[1,"input-group-addon"],[3,"click"],["class","p-2",4,"ngIf"],["type","password","id","exampleInputpwd3","placeholder","Confirmar contrase\xf1a*","formControlName","passwordRepeat",1,"form-control"],["inputRepeatPassword",""],["class","form-group",4,"ngIf"],[1,"card-footer"],[1,"text-center"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10","bgc-primary-dark"],[1,"text-danger"],[1,"form-text","text-danger","list-unstyled"],[4,"ngIf"],["for","roleSelectInput"],["formControlName","role","id","roleSelectInput","s","",1,"form-control","custom-select"],[3,"value"],[1,"checkbox","checkbox-success"],["formControlName","terminosYCondiciones","id","checkbox2","type","checkbox"],["for","checkbox2"],[1,"primary"]],template:function(e,r){if(1&e&&(c.kc(0,j,62,21,"div",0),c.kc(1,T,11,0,"ng-template",null,1,c.lc)),2&e){const e=c.fc(2);c.dc("ngIf",!r.showValidationComponent)("ngIfElse",e)}},directives:[s.m,t.e,n.n,n.h,n.e,n.b,n.g,n.d,n.j,n.l,n.i,n.o,n.a],styles:[".row[_ngcontent-%COMP%]{justify-content:center}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({imports:[[t.f.forChild(Y)],t.f]}),e})();var W=o("bqc1");let A=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({imports:[[s.c,M,n.k,W.a]]}),e})()}}]);